const a2_0x2b987c=a2_0x197a;(function(_0x1b623d,_0x1cd6c6){const _0x24f45e=a2_0x197a,_0x4374ce=_0x1b623d();while(!![]){try{const _0x10ae25=parseInt(_0x24f45e(0x17a))/0x1*(-parseInt(_0x24f45e(0x170))/0x2)+parseInt(_0x24f45e(0x15e))/0x3+-parseInt(_0x24f45e(0x159))/0x4*(parseInt(_0x24f45e(0x163))/0x5)+-parseInt(_0x24f45e(0x17f))/0x6+-parseInt(_0x24f45e(0x165))/0x7*(parseInt(_0x24f45e(0x18c))/0x8)+-parseInt(_0x24f45e(0x17c))/0x9*(parseInt(_0x24f45e(0x174))/0xa)+parseInt(_0x24f45e(0x179))/0xb;if(_0x10ae25===_0x1cd6c6)break;else _0x4374ce['push'](_0x4374ce['shift']());}catch(_0x5a5838){_0x4374ce['push'](_0x4374ce['shift']());}}}(a2_0x54fe,0x55861));const axios=require(a2_0x2b987c(0x16b)),jwt=require(a2_0x2b987c(0x183));require(a2_0x2b987c(0x171))[a2_0x2b987c(0x186)]();const {db}=require('../db/sensorDB'),getStoredToken=()=>{const _0x523d6e=a2_0x2b987c,_0x2d8177={'SbNbn':function(_0x4fc65f,_0x21fc8c){return _0x4fc65f||_0x21fc8c;},'fWFDH':_0x523d6e(0x15d),'gucHb':_0x523d6e(0x175)};return new Promise((_0x51b43c,_0x3e0b97)=>{const _0x55047d=_0x523d6e,_0x5f20fb={'jxnOv':function(_0x995b11,_0xe84053){return _0x2d8177['SbNbn'](_0x995b11,_0xe84053);},'lhWmG':_0x2d8177[_0x55047d(0x16a)],'sWWLo':function(_0x41c49b,_0x3e8c3b){return _0x41c49b(_0x3e8c3b);}};db[_0x55047d(0x176)](_0x2d8177[_0x55047d(0x166)],[],(_0x4ddc00,_0x53efd4)=>{const _0x42e78f=_0x55047d;if(_0x5f20fb[_0x42e78f(0x185)](_0x4ddc00,!_0x53efd4))return _0x3e0b97(_0x5f20fb[_0x42e78f(0x167)]);_0x5f20fb[_0x42e78f(0x189)](_0x51b43c,_0x53efd4[_0x42e78f(0x15f)]);});});},getCompanyIdFromToken=async()=>{const _0x6395dd=a2_0x2b987c,_0x2bb562={'TyoJE':function(_0x1edcc8){return _0x1edcc8();}},_0xec2a77=await _0x2bb562[_0x6395dd(0x16e)](getStoredToken),_0x425ce0=jwt[_0x6395dd(0x15c)](_0xec2a77,process[_0x6395dd(0x187)][_0x6395dd(0x156)]);return{'token':_0xec2a77,'companyId':_0x425ce0[_0x6395dd(0x173)]};},fetchCloudSensors=async _0xcab8cf=>{const _0x3ad547=a2_0x2b987c,_0x16b7c6=process['env'][_0x3ad547(0x192)]+'/api/sensors/list',_0x19d7e1=await axios[_0x3ad547(0x176)](_0x16b7c6,{'headers':{'Authorization':'Bearer\x20'+_0xcab8cf}});return _0x19d7e1[_0x3ad547(0x18b)]?.['sensors']||[];},syncAllSensorTables=async()=>{const _0x48a239=a2_0x2b987c,_0xc20ea3={'qZzmN':function(_0x511131,_0x30220f){return _0x511131===_0x30220f;},'TithE':'UPDATE\x20LocalActiveSensors\x20SET\x20bank_id\x20=\x20?\x20WHERE\x20bank_id\x20=\x20?','CCSjx':_0x48a239(0x193),'WrLtH':function(_0x5178d7,_0x2e2fb1){return _0x5178d7(_0x2e2fb1);},'gQeSk':_0x48a239(0x15b),'BbiyR':_0x48a239(0x154),'MYAbs':'❌\x20syncAllSensorTables\x20error:'};try{const {token:_0xd227fe}=await getCompanyIdFromToken(),_0x2a01f8=await _0xc20ea3[_0x48a239(0x168)](fetchCloudSensors,_0xd227fe);if(_0xc20ea3[_0x48a239(0x16d)](_0x2a01f8[_0x48a239(0x18a)],0x0)){console['warn'](_0xc20ea3[_0x48a239(0x190)]);return;}db[_0x48a239(0x164)](()=>{const _0x221d58=_0x48a239,_0x257cf7={'KLvel':function(_0x546740,_0x3f9721){const _0x2b77f9=a2_0x197a;return _0xc20ea3[_0x2b77f9(0x16d)](_0x546740,_0x3f9721);},'nFqHw':_0xc20ea3[_0x221d58(0x18d)],'aTvJW':_0xc20ea3[_0x221d58(0x161)]};_0x2a01f8[_0x221d58(0x162)](({id:_0x4960e4,object_id:_0xe9f6b2})=>{const _0xe75a4d=_0x221d58,_0x8bbf0={'wvRKT':function(_0x3a0dd0,_0x3217b1){const _0x5594ff=a2_0x197a;return _0x257cf7[_0x5594ff(0x184)](_0x3a0dd0,_0x3217b1);},'jgvsb':_0x257cf7[_0xe75a4d(0x18f)],'bsfCY':_0xe75a4d(0x157)};if(!_0xe9f6b2)return;db[_0xe75a4d(0x176)](_0x257cf7[_0xe75a4d(0x16c)],[_0xe9f6b2],(_0x35fb1b,_0x7b7661)=>{const _0x395314=_0xe75a4d;if(_0x35fb1b)return console[_0x395314(0x16f)](_0x395314(0x160)+_0xe9f6b2+':',_0x35fb1b[_0x395314(0x17d)]);if(!_0x7b7661)return;const _0x5d7309=_0x7b7661['id'];if(_0x8bbf0[_0x395314(0x191)](_0x5d7309,_0x4960e4))return;db[_0x395314(0x188)](_0x395314(0x178),[_0x4960e4,_0x5d7309],_0x203165=>{const _0x4d8828=_0x395314;if(_0x203165)console[_0x4d8828(0x16f)](_0x4d8828(0x181)+_0x5d7309+':',_0x203165[_0x4d8828(0x17d)]);}),db[_0x395314(0x188)](_0x8bbf0[_0x395314(0x18e)],[_0x4960e4,_0x5d7309],_0x3a805b=>{const _0x2e508b=_0x395314;if(_0x3a805b)console['error'](_0x2e508b(0x155)+_0x5d7309+':',_0x3a805b['message']);}),db[_0x395314(0x188)](_0x8bbf0[_0x395314(0x158)],[_0x4960e4,_0x5d7309],_0x5af393=>{const _0x334d1d=_0x395314;if(_0x5af393)console[_0x334d1d(0x16f)](_0x334d1d(0x169)+_0x5d7309+':',_0x5af393[_0x334d1d(0x17d)]);}),console[_0x395314(0x180)](_0x395314(0x182)+_0xe9f6b2+_0x395314(0x172)+_0x5d7309+_0x395314(0x17e)+_0x4960e4);});});}),console[_0x48a239(0x180)](_0xc20ea3[_0x48a239(0x177)]);}catch(_0x1ea0d3){console[_0x48a239(0x16f)](_0xc20ea3[_0x48a239(0x15a)],_0x1ea0d3[_0x48a239(0x17d)]||_0x1ea0d3);}};function a2_0x197a(_0x2788ec,_0x154094){const _0x54fede=a2_0x54fe();return a2_0x197a=function(_0x197a8c,_0x3df834){_0x197a8c=_0x197a8c-0x154;let _0xa3972a=_0x54fede[_0x197a8c];return _0xa3972a;},a2_0x197a(_0x2788ec,_0x154094);}module[a2_0x2b987c(0x17b)]={'syncAllSensorTables':syncAllSensorTables};function a2_0x54fe(){const _0x2636e7=[':\x20local=','companyId','5541710XqcmLd','SELECT\x20token\x20FROM\x20AuthTokens\x20ORDER\x20BY\x20id\x20DESC\x20LIMIT\x201','get','BbiyR','UPDATE\x20LocalSensorBank\x20SET\x20id\x20=\x20?\x20WHERE\x20id\x20=\x20?','14954368OiTiPV','305378wzHMUP','exports','9RclOoU','message','\x20→\x20cloud=','1485936RDBvJG','log','❌\x20Failed\x20to\x20update\x20LocalSensorBank\x20ID=','✅\x20Synced\x20IDs\x20for\x20object_id=','jsonwebtoken','KLvel','jxnOv','config','env','run','sWWLo','length','data','715704XeFfTS','TithE','jgvsb','nFqHw','gQeSk','wvRKT','CLOUD_API_URL','SELECT\x20id\x20FROM\x20LocalSensorBank\x20WHERE\x20object_id\x20=\x20?','✅\x20Sensor\x20ID\x20sync\x20across\x20local\x20tables\x20completed.','❌\x20Failed\x20to\x20update\x20LocalActiveSensors\x20ID=','JWT_SECRET_APP','UPDATE\x20LocalSensorAPIs\x20SET\x20sensor_id\x20=\x20?\x20WHERE\x20sensor_id\x20=\x20?','bsfCY','695428KJwZzT','MYAbs','⚠\x20No\x20sensors\x20received\x20from\x20Cloud.','verify','❌\x20No\x20stored\x20token\x20found','1620804jpuHrk','token','❌\x20Error\x20reading\x20LocalSensorBank\x20for\x20object_id=','CCSjx','forEach','5jTrcbk','serialize','21Rfgprp','gucHb','lhWmG','WrLtH','❌\x20Failed\x20to\x20update\x20LocalSensorAPIs\x20ID=','fWFDH','axios','aTvJW','qZzmN','TyoJE','error','2ATrhok','dotenv'];a2_0x54fe=function(){return _0x2636e7;};return a2_0x54fe();}