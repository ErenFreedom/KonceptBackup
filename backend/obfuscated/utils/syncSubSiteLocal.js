function a0_0x4e03(_0x32d730,_0x49f2c2){const _0x2566a9=a0_0x2566();return a0_0x4e03=function(_0x4e0385,_0x22ffb0){_0x4e0385=_0x4e0385-0xab;let _0x52a973=_0x2566a9[_0x4e0385];return _0x52a973;},a0_0x4e03(_0x32d730,_0x49f2c2);}const a0_0x4cdbff=a0_0x4e03;(function(_0x2aba63,_0x58a20a){const _0x59fcc7=a0_0x4e03,_0x241d2c=_0x2aba63();while(!![]){try{const _0x5e6d24=parseInt(_0x59fcc7(0xb3))/0x1*(parseInt(_0x59fcc7(0xc6))/0x2)+parseInt(_0x59fcc7(0xab))/0x3+-parseInt(_0x59fcc7(0xd8))/0x4+parseInt(_0x59fcc7(0xb5))/0x5*(parseInt(_0x59fcc7(0xbc))/0x6)+parseInt(_0x59fcc7(0xd6))/0x7+-parseInt(_0x59fcc7(0xba))/0x8+parseInt(_0x59fcc7(0xd9))/0x9;if(_0x5e6d24===_0x58a20a)break;else _0x241d2c['push'](_0x241d2c['shift']());}catch(_0x58dbcb){_0x241d2c['push'](_0x241d2c['shift']());}}}(a0_0x2566,0x64478));function a0_0x2566(){const _0x209681=['property_name','bank_id','\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20sensor_id\x20INTEGER\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20value\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20quality\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20quality_good\x20BOOLEAN,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20timestamp\x20TEXT\x20NOT\x20NULL,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY\x20(sensor_id)\x20REFERENCES\x20','36UkKOQQ','error','10ZaYegY','SensorData_','axios','JWT_SECRET_APP','SensorAPI_','3889056JHsGJm','length','911868xxhjHQ','kBhbu','INSERT\x20OR\x20IGNORE\x20INTO\x20','config','❌\x20No\x20valid\x20token\x20found\x20in\x20AuthTokens','log','run','✅\x20Synced\x20sub-site\x20','dotenv','get','2038AMmbPl','CLOUD_API_URL','result','created_at','updated_at','Sensor_','SELECT\x20token\x20FROM\x20AuthTokens\x20ORDER\x20BY\x20id\x20DESC\x20LIMIT\x201','MPunq','❌\x20Insert\x20failed\x20[SensorBank\x20','../db/sensorDB','sensor_id','name','data_type','(id)\x20ON\x20DELETE\x20CASCADE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20);','CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20','env','1789788OSjnVb','❌\x20Insert\x20failed\x20[SensorAPI\x20','1477896hvOPrm','4401702ANeXQG','object_id','\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20name\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20description\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20object_id\x20TEXT\x20UNIQUE,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20property_name\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20data_type\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20is_active\x20BOOLEAN,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20room_id\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20created_at\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20updated_at\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20subsite_id\x20INTEGER\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20);',',\x20ActiveSensors:\x20','\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?)',',\x20APIs:\x20','is_active','❌\x20Insert\x20failed\x20[Sensor\x20','company_id','api_endpoint','jsonwebtoken','(bank_id)\x20ON\x20DELETE\x20CASCADE\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20);','room_id','data','message','❌\x20Sub-site\x20sync\x20failed:','Bearer\x20','❌\x20JWT\x20verification\x20failed:','542844YGCGWJ','verify','companyId','/api/subsite/cloud/sync/subsite-db'];a0_0x2566=function(){return _0x209681;};return a0_0x2566();}const axios=require(a0_0x4cdbff(0xb7)),jwt=require(a0_0x4cdbff(0xe3)),{db}=require(a0_0x4cdbff(0xcf));require(a0_0x4cdbff(0xc4))[a0_0x4cdbff(0xbf)]();const CLOUD_API_URL=process[a0_0x4cdbff(0xd5)][a0_0x4cdbff(0xc7)],syncAllSubSites=async()=>{const _0x1d08db=a0_0x4cdbff,_0x544d1f={'kBhbu':_0x1d08db(0xc0),'MPunq':_0x1d08db(0xea)};try{db['get'](_0x1d08db(0xcc),async(_0x2e4638,_0x293ed7)=>{const _0x2bb1f1=_0x1d08db;if(_0x2e4638||!_0x293ed7){console['error'](_0x544d1f[_0x2bb1f1(0xbd)]);return;}const _0x3258f5=_0x293ed7['token'];let _0x4f97b6;try{_0x4f97b6=jwt[_0x2bb1f1(0xac)](_0x3258f5,process[_0x2bb1f1(0xd5)][_0x2bb1f1(0xb8)]);}catch(_0x59912d){console[_0x2bb1f1(0xb4)](_0x544d1f[_0x2bb1f1(0xcd)],_0x59912d[_0x2bb1f1(0xe7)]);return;}const _0x113c3f=_0x4f97b6[_0x2bb1f1(0xad)]||_0x4f97b6[_0x2bb1f1(0xe1)],_0x35d404=await axios[_0x2bb1f1(0xc5)](CLOUD_API_URL+_0x2bb1f1(0xae),{'headers':{'Authorization':_0x2bb1f1(0xe9)+_0x3258f5}});for(const _0x23c5f3 of _0x35d404[_0x2bb1f1(0xe6)][_0x2bb1f1(0xc8)]){const {subsiteId:_0x1ea573,sensorBank:_0x5394d7,activeSensors:_0xbdc397,sensorApis:_0x32086d,sensorDataBankIds:_0x1bb4e7}=_0x23c5f3,_0x1c2331='SensorBank_'+_0x113c3f+'_'+_0x1ea573,_0x22e241=_0x2bb1f1(0xcb)+_0x113c3f+'_'+_0x1ea573,_0xaf72c5=_0x2bb1f1(0xb9)+_0x113c3f+'_'+_0x1ea573;db['serialize'](()=>{const _0x4208c8=_0x2bb1f1;db[_0x4208c8(0xc2)](_0x4208c8(0xd4)+_0x1c2331+_0x4208c8(0xdb)),db['run'](_0x4208c8(0xd4)+_0x22e241+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20bank_id\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20is_active\x20BOOLEAN,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20created_at\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20updated_at\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY\x20(bank_id)\x20REFERENCES\x20'+_0x1c2331+_0x4208c8(0xd3)),db[_0x4208c8(0xc2)](_0x4208c8(0xd4)+_0xaf72c5+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20sensor_id\x20INTEGER,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20api_endpoint\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20created_at\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20FOREIGN\x20KEY\x20(sensor_id)\x20REFERENCES\x20'+_0x1c2331+_0x4208c8(0xd3));for(const _0x4b0e0c of _0x5394d7){db[_0x4208c8(0xc2)](_0x4208c8(0xbe)+_0x1c2331+_0x4208c8(0xb1),[_0x4b0e0c['id'],_0x4b0e0c[_0x4208c8(0xd1)],_0x4b0e0c['description'],_0x4b0e0c[_0x4208c8(0xda)],_0x4b0e0c[_0x4208c8(0xaf)],_0x4b0e0c[_0x4208c8(0xd2)],_0x4b0e0c[_0x4208c8(0xdf)],_0x4b0e0c[_0x4208c8(0xe5)],_0x4b0e0c[_0x4208c8(0xc9)],_0x4b0e0c[_0x4208c8(0xca)],_0x1ea573],_0x17ee49=>{const _0xf527fc=_0x4208c8;if(_0x17ee49)console[_0xf527fc(0xb4)](_0xf527fc(0xce)+_0x1ea573+']:',_0x17ee49[_0xf527fc(0xe7)]);});}for(const _0x521bbc of _0xbdc397){db['run'](_0x4208c8(0xbe)+_0x22e241+_0x4208c8(0xdd),[_0x521bbc['id'],_0x521bbc[_0x4208c8(0xb0)],_0x521bbc[_0x4208c8(0xdf)],_0x521bbc[_0x4208c8(0xc9)],_0x521bbc[_0x4208c8(0xca)]],_0x113916=>{const _0x2d9bb6=_0x4208c8;if(_0x113916)console[_0x2d9bb6(0xb4)](_0x2d9bb6(0xe0)+_0x1ea573+']:',_0x113916[_0x2d9bb6(0xe7)]);});}for(const _0x2c1941 of _0x32086d){db[_0x4208c8(0xc2)](_0x4208c8(0xbe)+_0xaf72c5+'\x20VALUES\x20(?,\x20?,\x20?,\x20?)',[_0x2c1941['id'],_0x2c1941[_0x4208c8(0xd0)],_0x2c1941[_0x4208c8(0xe2)],_0x2c1941[_0x4208c8(0xc9)]],_0x5f0c0b=>{const _0x277c68=_0x4208c8;if(_0x5f0c0b)console[_0x277c68(0xb4)](_0x277c68(0xd7)+_0x1ea573+']:',_0x5f0c0b[_0x277c68(0xe7)]);});}});for(const _0x29415a of _0x1bb4e7){const _0x2ebae3=_0x2bb1f1(0xb6)+_0x113c3f+'_'+_0x1ea573+'_'+_0x29415a;db['run'](_0x2bb1f1(0xd4)+_0x2ebae3+_0x2bb1f1(0xb2)+_0x22e241+_0x2bb1f1(0xe4),_0x5d9ea0=>{const _0x19cbf4=_0x2bb1f1;if(_0x5d9ea0)console[_0x19cbf4(0xb4)]('❌\x20Failed\x20to\x20create\x20table\x20'+_0x2ebae3+':',_0x5d9ea0[_0x19cbf4(0xe7)]);});}console[_0x2bb1f1(0xc1)](_0x2bb1f1(0xc3)+_0x1ea573+'\x20(SensorBank:\x20'+_0x5394d7[_0x2bb1f1(0xbb)]+_0x2bb1f1(0xdc)+_0xbdc397[_0x2bb1f1(0xbb)]+_0x2bb1f1(0xde)+_0x32086d[_0x2bb1f1(0xbb)]+')');}});}catch(_0x44f4a3){console[_0x1d08db(0xb4)](_0x1d08db(0xe8),_0x44f4a3[_0x1d08db(0xe7)]);}};module['exports']={'syncAllSubSites':syncAllSubSites};