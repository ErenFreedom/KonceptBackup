function a0_0x523b(_0xd7bd93,_0x533893){const _0x428498=a0_0x4284();return a0_0x523b=function(_0x523b94,_0xa37cd9){_0x523b94=_0x523b94-0x1c4;let _0xf75265=_0x428498[_0x523b94];return _0xf75265;},a0_0x523b(_0xd7bd93,_0x533893);}function a0_0x4284(){const _0x271c32=['QUhSm','get','../db/sensorDB','run','api_endpoint','UPDATE\x20IntervalControl\x20SET\x20is_fetching\x20=\x200\x20WHERE\x20is_fetching\x20=\x201','UPDATE\x20IntervalControl\x20SET\x20is_sending\x20=\x200\x20WHERE\x20is_sending\x20=\x201','2927676saqEtL','822420XTQLSd','fRvjV','NhXps','rSaxB','âŒ\x20No\x20Desigo\x20token\x20found.','âŒ\x20Error\x20stopping\x20fetching:','log','âš ï¸\x20Desigo\x20Health\x20Failure\x20#','ðŸ›‘\x20Stopped\x20sending\x20for\x20','147459GpNyzS','âŒ\x20Error\x20stopping\x20sending:','axios','vjHaX','99288fRhwyh','warn','No\x20active\x20sensor\x20API.','APYex','KHERP','ciowk','message','ðŸ›‘\x20Stopping\x20all\x20sensors:\x20Desigo\x20server\x20unreachable\x20for\x203\x20consecutive\x20checks.','SELECT\x20token\x20FROM\x20DesigoAuthTokens\x20ORDER\x20BY\x20id\x20DESC\x20LIMIT\x201','BHBSN','ðŸ›‘\x203\x20Consecutive\x20Failures.\x20Stopping\x20all\x20sensor\x20activities.','WFgwn','cgLxp','VRuYL','11594TRqtos','âœ…\x20Desigo\x20server\x20reachable.','\x20sensor(s).','No\x20token\x20available.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20api_endpoint\x20FROM\x20LocalSensorAPIs\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20JOIN\x20LocalActiveSensors\x20ON\x20LocalSensorAPIs.sensor_id\x20=\x20LocalActiveSensors.id\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20WHERE\x20LocalActiveSensors.is_active\x20=\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20LIMIT\x201\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','7JGQFvU','970728maUIBK','âœ…\x20Desigo\x20connection\x20restored.\x20Resetting\x20failure\x20counter.','./logHelpers','ðŸ›‘\x20Stopped\x20fetching\x20for\x20','kofiS','changes','exports','125136bGLzKt','NkoYF','âŒ\x20No\x20active\x20sensor\x20API\x20found.','error'];a0_0x4284=function(){return _0x271c32;};return a0_0x4284();}const a0_0x5aac40=a0_0x523b;(function(_0x3d5de7,_0xab4f90){const _0x1a810d=a0_0x523b,_0x51c0e0=_0x3d5de7();while(!![]){try{const _0x29b656=parseInt(_0x1a810d(0x1d5))/0x1+-parseInt(_0x1a810d(0x1e7))/0x2+-parseInt(_0x1a810d(0x1d9))/0x3+-parseInt(_0x1a810d(0x1f4))/0x4+-parseInt(_0x1a810d(0x1cc))/0x5+parseInt(_0x1a810d(0x1cb))/0x6*(parseInt(_0x1a810d(0x1ec))/0x7)+-parseInt(_0x1a810d(0x1ed))/0x8;if(_0x29b656===_0xab4f90)break;else _0x51c0e0['push'](_0x51c0e0['shift']());}catch(_0x56b2ee){_0x51c0e0['push'](_0x51c0e0['shift']());}}}(a0_0x4284,0x4436b));const axios=require(a0_0x5aac40(0x1d7)),{db}=require(a0_0x5aac40(0x1c6)),{insertLog}=require(a0_0x5aac40(0x1ef));let consecutiveFailures=0x0;const checkDesigoConnection=async()=>{const _0xa05043=a0_0x5aac40,_0x431f5e={'WvQLv':function(_0x216c8b,_0x260cc6){return _0x216c8b||_0x260cc6;},'APYex':function(_0x31105e,_0x28e086){return _0x31105e(_0x28e086);},'kofiS':_0xa05043(0x1db),'VRuYL':_0xa05043(0x1e8),'NkoYF':_0xa05043(0x1ea),'jYxCV':_0xa05043(0x1e1)};return new Promise((_0x37482d,_0x4b7179)=>{const _0x38f410=_0xa05043;db[_0x38f410(0x1c5)](_0x431f5e['jYxCV'],(_0xa23dd5,_0x42ae07)=>{const _0x10c215=_0x38f410,_0x1cf0e0={'WFgwn':function(_0xe08185,_0x5e31b3){return _0x431f5e['WvQLv'](_0xe08185,_0x5e31b3);},'ciowk':_0x10c215(0x1f6),'KHERP':function(_0x11649f,_0x121c03){const _0x372211=_0x10c215;return _0x431f5e[_0x372211(0x1dc)](_0x11649f,_0x121c03);},'XlOFl':_0x431f5e[_0x10c215(0x1f1)],'BHBSN':_0x431f5e[_0x10c215(0x1e6)],'NhXps':function(_0x948b3c,_0x25349f){const _0x4d98fe=_0x10c215;return _0x431f5e[_0x4d98fe(0x1dc)](_0x948b3c,_0x25349f);},'ZIfno':'Desigo\x20server\x20unreachable.'};if(_0x431f5e['WvQLv'](_0xa23dd5,!_0x42ae07))return console[_0x10c215(0x1f7)](_0x10c215(0x1d0)),_0x4b7179(_0x431f5e[_0x10c215(0x1f5)]);const _0x35740f=_0x42ae07['token'];db[_0x10c215(0x1c5)](_0x10c215(0x1eb),async(_0x836999,_0x8ca300)=>{const _0x165be4=_0x10c215;if(_0x1cf0e0[_0x165be4(0x1e4)](_0x836999,!_0x8ca300))return console['error'](_0x1cf0e0[_0x165be4(0x1de)]),_0x1cf0e0[_0x165be4(0x1dd)](_0x4b7179,_0x1cf0e0['XlOFl']);const _0x2a2db9=_0x8ca300[_0x165be4(0x1c8)];try{await axios[_0x165be4(0x1c5)](_0x2a2db9,{'headers':{'Authorization':'Bearer\x20'+_0x35740f},'timeout':0x1388}),console[_0x165be4(0x1d2)](_0x1cf0e0[_0x165be4(0x1e2)]),_0x1cf0e0[_0x165be4(0x1ce)](_0x37482d,!![]);}catch(_0x3369c9){console[_0x165be4(0x1f7)]('âŒ\x20Failed\x20to\x20reach\x20Desigo:',_0x3369c9[_0x165be4(0x1df)]),_0x4b7179(_0x1cf0e0['ZIfno']);}});});});},stopAllSending=()=>{const _0x272114=a0_0x5aac40,_0x4bf718={'npCAe':_0x272114(0x1d6),'vjHaX':_0x272114(0x1ca)};db[_0x272114(0x1c7)](_0x4bf718[_0x272114(0x1d8)],[],function(_0x3f1628){const _0x2784e2=_0x272114;_0x3f1628?console['error'](_0x4bf718['npCAe'],_0x3f1628[_0x2784e2(0x1df)]):console[_0x2784e2(0x1d2)](_0x2784e2(0x1d4)+this['changes']+'\x20sensor(s).');});},stopAllFetching=()=>{const _0xb57224=a0_0x5aac40,_0x5bff63={'fRvjV':_0xb57224(0x1d1),'WVVBg':_0xb57224(0x1c9)};db[_0xb57224(0x1c7)](_0x5bff63['WVVBg'],[],function(_0x38edf5){const _0x45ca5f=_0xb57224;_0x38edf5?console[_0x45ca5f(0x1f7)](_0x5bff63[_0x45ca5f(0x1cd)],_0x38edf5[_0x45ca5f(0x1df)]):console[_0x45ca5f(0x1d2)](_0x45ca5f(0x1f0)+this[_0x45ca5f(0x1f2)]+_0x45ca5f(0x1e9));});},desigoHealthMonitor=async()=>{const _0x1d4f9b=a0_0x5aac40,_0x50a84b={'QUhSm':function(_0x4cb8a4){return _0x4cb8a4();},'cgLxp':function(_0x2f497d,_0x28c8c7){return _0x2f497d>=_0x28c8c7;},'rSaxB':_0x1d4f9b(0x1e3)};try{await _0x50a84b[_0x1d4f9b(0x1c4)](checkDesigoConnection),consecutiveFailures>0x0&&console[_0x1d4f9b(0x1d2)](_0x1d4f9b(0x1ee)),consecutiveFailures=0x0;}catch(_0x5577f6){consecutiveFailures++,console[_0x1d4f9b(0x1da)](_0x1d4f9b(0x1d3)+consecutiveFailures),_0x50a84b[_0x1d4f9b(0x1e5)](consecutiveFailures,0x3)&&(console[_0x1d4f9b(0x1f7)](_0x50a84b[_0x1d4f9b(0x1cf)]),insertLog(0x0,_0x1d4f9b(0x1e0)),_0x50a84b[_0x1d4f9b(0x1c4)](stopAllSending),_0x50a84b[_0x1d4f9b(0x1c4)](stopAllFetching));}};module[a0_0x5aac40(0x1f3)]={'desigoHealthMonitor':desigoHealthMonitor};