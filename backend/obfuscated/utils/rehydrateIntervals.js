const a0_0x3e33ed=a0_0xa4c8;function a0_0xa4c8(_0x315ad0,_0x4add0f){const _0x3cbf72=a0_0x3cbf();return a0_0xa4c8=function(_0xa4c85,_0x4324b){_0xa4c85=_0xa4c85-0x158;let _0x2fb760=_0x3cbf72[_0xa4c85];return _0x2fb760;},a0_0xa4c8(_0x315ad0,_0x4add0f);}(function(_0x14a0b2,_0x27285a){const _0x566934=a0_0xa4c8,_0x4cac68=_0x14a0b2();while(!![]){try{const _0x5ca1dc=parseInt(_0x566934(0x16e))/0x1+parseInt(_0x566934(0x170))/0x2+parseInt(_0x566934(0x17a))/0x3*(-parseInt(_0x566934(0x180))/0x4)+-parseInt(_0x566934(0x176))/0x5*(-parseInt(_0x566934(0x17f))/0x6)+-parseInt(_0x566934(0x158))/0x7*(-parseInt(_0x566934(0x16a))/0x8)+parseInt(_0x566934(0x160))/0x9+-parseInt(_0x566934(0x17b))/0xa*(parseInt(_0x566934(0x163))/0xb);if(_0x5ca1dc===_0x27285a)break;else _0x4cac68['push'](_0x4cac68['shift']());}catch(_0x4a7252){_0x4cac68['push'](_0x4cac68['shift']());}}}(a0_0x3cbf,0x539f6));const {db}=require(a0_0x3e33ed(0x17d)),jwt=require('jsonwebtoken'),{fetchAndStoreSensorData}=require(a0_0x3e33ed(0x15d)),{sendDataToCloud}=require(a0_0x3e33ed(0x174));function a0_0x3cbf(){const _0x474e7e=['TeUTL','companyId','923103xepYVP','♻️\x20Send\x20job\x20resumed\x20for\x20sensor\x20','JWT_SECRET_APP','205007CnAdaO','AUTO-RECOVER-TOKEN','SELECT\x20token\x20FROM\x20AuthTokens\x20ORDER\x20BY\x20id\x20DESC\x20LIMIT\x201','all','get','Token\x20not\x20found','yeHYr','88dLydJu','qSIyd','bank_id','log','481109DFloAO','env','339340mZFeYP','yPhQf','pWmql','exports','../controllers/sendSensorDataController','error','86315pHictT','❌\x20Failed\x20to\x20rehydrate\x20jobs:','message','idGzW','4752gjiVVS','480BKHvsG','interval_seconds','../db/sensorDB','HtEEM','18FMNbZM','28bHNxAM','281939xMvusf','forEach','\x0a\x20\x20\x20\x20\x20\x20SELECT\x20A.bank_id,\x20A.interval_seconds,\x20L.api_endpoint\x0a\x20\x20\x20\x20\x20\x20FROM\x20IntervalControl\x20IC\x0a\x20\x20\x20\x20\x20\x20JOIN\x20LocalActiveSensors\x20A\x20ON\x20A.id\x20=\x20IC.sensor_id\x0a\x20\x20\x20\x20\x20\x20JOIN\x20LocalSensorAPIs\x20L\x20ON\x20L.sensor_id\x20=\x20A.bank_id\x0a\x20\x20\x20\x20\x20\x20WHERE\x20IC.is_fetching\x20=\x201\x0a\x20\x20\x20\x20','KuOVZ','❌\x20Fetch\x20rehydrate\x20error:','../controllers/fetchSensorDataController'];a0_0x3cbf=function(){return _0x474e7e;};return a0_0x3cbf();}async function getStoredToken(){const _0x5218ad=a0_0x3e33ed,_0x503b2a={'qSIyd':function(_0x85530c,_0x5b695e){return _0x85530c||_0x5b695e;},'KuOVZ':function(_0x21d418,_0x48de6e){return _0x21d418(_0x48de6e);},'HtEEM':_0x5218ad(0x165)};return new Promise((_0x25831b,_0x39c01e)=>{const _0x24f35b=_0x5218ad,_0x2d66c7={'TeUTL':function(_0x4f2824,_0x40624f){const _0x3cc9d6=a0_0xa4c8;return _0x503b2a[_0x3cc9d6(0x16b)](_0x4f2824,_0x40624f);},'yeHYr':function(_0x5c73d0,_0x1b33fa){const _0x1206f4=a0_0xa4c8;return _0x503b2a[_0x1206f4(0x15b)](_0x5c73d0,_0x1b33fa);},'AlHJB':function(_0xd549e3,_0x58d619){const _0x43b128=a0_0xa4c8;return _0x503b2a[_0x43b128(0x15b)](_0xd549e3,_0x58d619);}};db[_0x24f35b(0x167)](_0x503b2a[_0x24f35b(0x17e)],[],(_0x15e988,_0x487105)=>{const _0x235f0f=_0x24f35b;if(_0x2d66c7[_0x235f0f(0x15e)](_0x15e988,!_0x487105))_0x2d66c7[_0x235f0f(0x169)](_0x39c01e,_0x235f0f(0x168));else _0x2d66c7['AlHJB'](_0x25831b,_0x487105['token']);});});}async function rehydrateIntervals(){const _0x30b673=a0_0x3e33ed,_0x3be039={'pWmql':'❌\x20Send\x20rehydrate\x20error:','YOGIo':function(_0x3de370){return _0x3de370();},'yPhQf':_0x30b673(0x177)};try{const _0xe6f4e2=await _0x3be039['YOGIo'](getStoredToken),_0x599e3e=jwt['verify'](_0xe6f4e2,process[_0x30b673(0x16f)][_0x30b673(0x162)]),_0x41ed7c=_0x599e3e[_0x30b673(0x15f)];db['all'](_0x30b673(0x15a),[],(_0x5c1641,_0x227803)=>{const _0x1b1132=_0x30b673,_0x26234b={'idGzW':function(_0x43f183,_0xbc2e9d,_0x157d13,_0x408fe2){return _0x43f183(_0xbc2e9d,_0x157d13,_0x408fe2);}};if(_0x5c1641)return console[_0x1b1132(0x175)](_0x1b1132(0x15c),_0x5c1641[_0x1b1132(0x178)]);_0x227803[_0x1b1132(0x159)](_0x30b2bb=>{const _0x18dd71=_0x1b1132;_0x26234b[_0x18dd71(0x179)](fetchAndStoreSensorData,{'sensor_id':_0x30b2bb['bank_id'],'api_endpoint':_0x30b2bb['api_endpoint'],'interval_seconds':_0x30b2bb[_0x18dd71(0x17c)]},_0x41ed7c,_0x18dd71(0x164)),console[_0x18dd71(0x16d)]('♻️\x20Fetch\x20job\x20resumed\x20for\x20sensor\x20'+_0x30b2bb[_0x18dd71(0x16c)]);});}),db[_0x30b673(0x166)]('\x0a\x20\x20\x20\x20\x20\x20SELECT\x20A.bank_id\x0a\x20\x20\x20\x20\x20\x20FROM\x20IntervalControl\x20IC\x0a\x20\x20\x20\x20\x20\x20JOIN\x20LocalActiveSensors\x20A\x20ON\x20A.id\x20=\x20IC.sensor_id\x0a\x20\x20\x20\x20\x20\x20WHERE\x20IC.is_sending\x20=\x201\x0a\x20\x20\x20\x20',[],(_0xcf5463,_0x29a843)=>{const _0x1d5573=_0x30b673;if(_0xcf5463)return console[_0x1d5573(0x175)](_0x3be039[_0x1d5573(0x172)],_0xcf5463['message']);_0x29a843['forEach'](_0x783558=>{const _0x278e1f=_0x1d5573;sendDataToCloud(_0x783558['bank_id']),console[_0x278e1f(0x16d)](_0x278e1f(0x161)+_0x783558['bank_id']);});});}catch(_0x2c8b84){console['error'](_0x3be039[_0x30b673(0x171)],_0x2c8b84[_0x30b673(0x178)]);}}module[a0_0x3e33ed(0x173)]={'rehydrateIntervals':rehydrateIntervals};