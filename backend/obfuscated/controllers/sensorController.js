const a8_0xfb3ca4=a8_0x5d0d;function a8_0x5bbc(){const _0x2371a0=['jOajG','DataType','TLFgH','data','ndKcH','3318266eklAnr','ðŸ—‘\x20Deleting\x20Sensor\x20from\x20Cloud:\x20','Invalid\x20sensor\x20API\x20response\x20format','Sensor\x20added\x20successfully','get','VmVSV','âŒ\x20Error\x20fetching\x20API\x20endpoints:','Sensor\x20API,\x20name,\x20and\x20rate\x20limit\x20are\x20required','UXSAp','\x20deleted\x20from\x20LocalSensorAPIs.','ktbnx','../db/sensorDB','JckWH','âŒ\x20Error\x20deleting\x20from\x20Cloud:','3207065SPCWyS','status','hZUzX','Sensor\x20ID\x20not\x20found\x20after\x20sync','/api/sensor-bank/delete/','Failed\x20to\x20fetch\x20API\x20endpoints','SsQvt','exQBZ','/api/sensor-bank/all','ðŸ“¥\x20Incoming\x20Add\x20Sensor\x20Request:','\x20deleted\x20from\x20LocalSensorBank.','âŒ\x20Error\x20inserting\x20into\x20LocalSensorAPIs:','Internal\x20Server\x20Error','Unauthorized:\x20No\x20Desigo\x20Token\x20Found','wqxUF','all','response','ðŸ”\x20Using\x20Token:\x20','ifUUd','148LublnS','fBeOd','config','DELETE\x20FROM\x20LocalSensorBank\x20WHERE\x20id\x20=\x20?','wrzHn','Failed\x20to\x20insert\x20sensor\x20locally','Missing\x20row','dIGxu','Error\x20fetching\x20token\x20from\x20database','\x0a\x20\x20\x20\x20\x20\x20\x20\x20SELECT\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20b.id,\x20b.name,\x20b.description,\x20b.object_id,\x20b.property_name,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20b.data_type,\x20b.is_active,\x20b.created_at,\x20b.updated_at,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20a.api_endpoint\x0a\x20\x20\x20\x20\x20\x20\x20\x20FROM\x20LocalSensorBank\x20b\x0a\x20\x20\x20\x20\x20\x20\x20\x20LEFT\x20JOIN\x20LocalSensorAPIs\x20a\x20ON\x20a.sensor_id\x20=\x20b.id\x0a\x20\x20\x20\x20\x20\x20','YoHPj','SELECT\x20sensor_id,\x20api_endpoint\x20FROM\x20LocalSensorAPIs','âŒ\x20Error\x20deleting\x20sensor:','cyRrG','EQPJU','PropertyName','LKrff','IBEhG','SBxAE','clbZJ','âŒ\x20Error\x20inserting\x20into\x20LocalSensorBank:','âŒ\x20Error\x20fetching\x20token:','DB\x20error\x20while\x20verifying\x20API','ðŸ“¤\x20Fetching\x20Sensors\x20from\x20Cloud:\x20','OAJWD','38455551PzLaHt','Vlzas','âœ…\x20Sensor\x20','âœ…\x20Sensor\x20deleted\x20from\x20Cloud:','DB\x20error\x20while\x20checking\x20existing\x20API','âœ…\x20Sensor\x20inserted\x20into\x20LocalSensorBank','CcLxS','SELECT\x20token\x20FROM\x20DesigoAuthTokens\x20ORDER\x20BY\x20id\x20DESC\x20LIMIT\x201','â±\x20rateLimit:','env','âŒ\x20Internal\x20error\x20in\x20getAllLocalSensorsWithAPI:','QbyDB','QTCGG','Yoqpy','FcABA','delete','1236260JYzixY','baaiH','/api/sensor-bank/add','8nCJYgK','DPmsm','WZLbt','âœ…\x20Sensors\x20received\x20from\x20Cloud:','message','âŒ\x20Error\x20deleting\x20from\x20LocalActiveSensors:','Failed\x20to\x20fetch\x20sensors','ooluf','Failed\x20to\x20delete\x20sensor\x20from\x20cloud','Arqqy','yuFhc','Agent','SELECT\x20token\x20FROM\x20AuthTokens\x20ORDER\x20BY\x20id\x20DESC\x20LIMIT\x201','CLOUD_API_URL','CzRRS','log','ðŸ§©\x20Sensor\x20ID\x20received\x20in\x20request:\x20','XHHVc','oCoWm','74961YmBNMK','SELECT\x20*\x20FROM\x20LocalSensorAPIs\x20WHERE\x20api_endpoint\x20=\x20?','egZHv','obBWm','Sensor\x20API\x20already\x20exists\x20in\x20LocalSensorAPIs','No\x20token\x20found','gtXOD','XynPt','3619452wNSGeO','error','âŒ\x20Error\x20checking\x20API\x20before\x20insert:','Sensor\x20deleted\x20successfully','ðŸŒ\x20sensorApi:','mMxyO','âŒ\x20Sensor\x20not\x20found\x20after\x20ID\x20sync:','fuXUM','âŒ\x20Error\x20fetching\x20sensors:','yFcNl','run','mKcyM','â˜ï¸\x20Cloud\x20Sensor\x20Added:','Pjbnt','KYhBI','DELETE\x20FROM\x20LocalActiveSensors\x20WHERE\x20bank_id\x20=\x20?','KKFIK','WSOAL','nuUyj','exports','WGZDu','serialize','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20LocalSensorAPIs\x20(sensor_id,\x20api_endpoint)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','âŒ\x20Error\x20fetching\x20Desigo\x20token:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20INSERT\x20INTO\x20LocalSensorBank\x20(name,\x20description,\x20object_id,\x20property_name,\x20data_type,\x20is_active)\x0a\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x200)\x0a\x20\x20\x20\x20\x20\x20','SELECT\x20id\x20FROM\x20LocalSensorBank\x20WHERE\x20object_id\x20=\x20?','âŒ\x20Error\x20fetching\x20sensors\x20from\x20cloud:','âŒ\x20Error\x20deleting\x20from\x20LocalSensorBank:','json','sCast','Bearer\x20','Unauthorized:\x20Token\x20missing\x20or\x20invalid','âœ…\x20Inserted\x20API\x20for\x20sensor\x20','KCelA','TvUXt','token','OVARt','ðŸ”\x20Tokens\x20fetched\x20successfully','âŒ\x20Error\x20fetching\x20local\x20sensors\x20with\x20API:','https','UVOdk','318559ueHRlI'];a8_0x5bbc=function(){return _0x2371a0;};return a8_0x5bbc();}(function(_0x55ea84,_0x35abbe){const _0x492540=a8_0x5d0d,_0x372ee0=_0x55ea84();while(!![]){try{const _0x2ee1fd=-parseInt(_0x492540(0x209))/0x1+-parseInt(_0x492540(0x259))/0x2+-parseInt(_0x492540(0x26f))/0x3*(parseInt(_0x492540(0x230))/0x4)+-parseInt(_0x492540(0x21d))/0x5+-parseInt(_0x492540(0x277))/0x6+-parseInt(_0x492540(0x20f))/0x7+-parseInt(_0x492540(0x25c))/0x8*(-parseInt(_0x492540(0x249))/0x9);if(_0x2ee1fd===_0x35abbe)break;else _0x372ee0['push'](_0x372ee0['shift']());}catch(_0x1d36b9){_0x372ee0['push'](_0x372ee0['shift']());}}}(a8_0x5bbc,0xa92ca));const axios=require('axios'),https=require(a8_0xfb3ca4(0x207));require('dotenv')[a8_0xfb3ca4(0x232)]();const {updateLocalSensorIds}=require('../utils/syncLocalSensorIds'),agent=new https[(a8_0xfb3ca4(0x267))]({'rejectUnauthorized':![]}),{db}=require(a8_0xfb3ca4(0x21a)),getStoredToken=()=>{const _0xde4edf=a8_0xfb3ca4,_0x250338={'OAJWD':function(_0x1d871a,_0x84df0){return _0x1d871a(_0x84df0);},'BCoPn':function(_0x19c67d,_0x3d0aba){return _0x19c67d(_0x3d0aba);},'fBeOd':_0xde4edf(0x268)};return new Promise((_0x1ec588,_0x4560cf)=>{const _0x500e99=_0xde4edf,_0x1704b5={'CEKsi':function(_0x4c4d55,_0x383c07){const _0x2ad845=a8_0x5d0d;return _0x250338[_0x2ad845(0x248)](_0x4c4d55,_0x383c07);},'KCelA':function(_0x5d6130,_0x57117a){return _0x250338['BCoPn'](_0x5d6130,_0x57117a);},'UWjQD':'No\x20stored\x20token\x20found.'};db[_0x500e99(0x213)](_0x250338[_0x500e99(0x231)],[],(_0x31310e,_0x134465)=>{const _0x13fcc2=_0x500e99;if(_0x31310e)console[_0x13fcc2(0x278)](_0x13fcc2(0x245),_0x31310e[_0x13fcc2(0x260)]),_0x1704b5['CEKsi'](_0x4560cf,_0x13fcc2(0x238));else!_0x134465?_0x1704b5[_0x13fcc2(0x201)](_0x4560cf,_0x1704b5['UWjQD']):_0x1ec588(_0x134465[_0x13fcc2(0x203)]);});});},addSensor=async(_0x20f366,_0x148afd)=>{const _0x182b54=a8_0xfb3ca4,_0x201b76={'clbZJ':function(_0xef2fb6,_0xe4e0e){return _0xef2fb6(_0xe4e0e);},'dIGxu':_0x182b54(0x24d),'QbyDB':'Desigo\x20token\x20not\x20found','ndKcH':_0x182b54(0x250),'ARXSX':_0x182b54(0x279),'WSOAL':_0x182b54(0x246),'VmVSV':_0x182b54(0x236),'egZHv':_0x182b54(0x235),'SwoIH':function(_0x368c31){return _0x368c31();},'CzRRS':_0x182b54(0x1f9),'EQPJU':'Sensor\x20added\x20via\x20Connector\x20App','slQgR':'ðŸ“›\x20sensorName:','jOajG':_0x182b54(0x251),'sCast':function(_0x35445c,_0xae624e){return _0x35445c||_0xae624e;},'KKFIK':_0x182b54(0x216),'ZFmtj':'âš \x20Sensor\x20API\x20already\x20exists\x20in\x20LocalSensorAPIs.\x20Skipping\x20insert.','cVnpT':_0x182b54(0x273),'gtXOD':function(_0x220992){return _0x220992();},'baaiH':_0x182b54(0x205),'XynPt':'âœ…\x20Sensor\x20Data\x20Parsed:','JckWH':_0x182b54(0x1ec),'UMHtb':'âŒ\x20Error\x20adding\x20sensor:','ifUUd':_0x182b54(0x229)};try{const {sensorApi:_0x449b75,sensorName:_0x470152,rateLimit:_0x4fdde4}=_0x20f366['body'];console[_0x182b54(0x26b)](_0x182b54(0x226)),console[_0x182b54(0x26b)](_0x182b54(0x27b),_0x449b75),console[_0x182b54(0x26b)](_0x201b76['slQgR'],_0x470152),console[_0x182b54(0x26b)](_0x201b76[_0x182b54(0x20a)],_0x4fdde4);if(_0x201b76[_0x182b54(0x1fd)](!_0x449b75,!_0x470152)||!_0x4fdde4)return _0x148afd[_0x182b54(0x21e)](0x190)[_0x182b54(0x1fc)]({'message':_0x201b76[_0x182b54(0x1f0)]});const _0x5d5b22=await new Promise((_0x98ae19,_0x40dd21)=>{const _0x18bb5e=_0x182b54,_0x2599e6={'WGZDu':function(_0xb9589b,_0x2caede){const _0x49012e=a8_0x5d0d;return _0x201b76[_0x49012e(0x243)](_0xb9589b,_0x2caede);},'ooluf':_0x201b76[_0x18bb5e(0x237)]};db[_0x18bb5e(0x213)]('SELECT\x20*\x20FROM\x20LocalSensorAPIs\x20WHERE\x20api_endpoint\x20=\x20?',[_0x449b75],(_0x14c228,_0x2b602d)=>{const _0x3fd52f=_0x18bb5e;if(_0x14c228)_0x2599e6[_0x3fd52f(0x1f4)](_0x40dd21,_0x2599e6[_0x3fd52f(0x263)]);else _0x2599e6[_0x3fd52f(0x1f4)](_0x98ae19,_0x2b602d);});});if(_0x5d5b22)return console['warn'](_0x201b76['ZFmtj']),_0x148afd[_0x182b54(0x21e)](0x199)[_0x182b54(0x1fc)]({'message':_0x201b76['cVnpT']});const _0xe3de57=await _0x201b76[_0x182b54(0x275)](getStoredToken),_0x1b29ae=await new Promise((_0x31cccf,_0x184fba)=>{const _0x2ec44d=_0x182b54,_0x3af5b6={'XHHVc':function(_0x2c98b4,_0x4dd5f6){const _0x5e5814=a8_0x5d0d;return _0x201b76[_0x5e5814(0x243)](_0x2c98b4,_0x4dd5f6);},'fuXUM':_0x201b76[_0x2ec44d(0x254)]};db['get'](_0x201b76[_0x2ec44d(0x20e)],[],(_0x42c4bf,_0x43e6b8)=>{const _0x4f5447=_0x2ec44d;if(_0x42c4bf||!_0x43e6b8?.['token'])_0x3af5b6['XHHVc'](_0x184fba,_0x3af5b6[_0x4f5447(0x1e7)]);else _0x3af5b6[_0x4f5447(0x26d)](_0x31cccf,_0x43e6b8[_0x4f5447(0x203)]);});});console[_0x182b54(0x26b)](_0x201b76[_0x182b54(0x25a)]);const _0x2fc38a=await axios['get'](_0x449b75,{'headers':{'Authorization':'Bearer\x20'+_0x1b29ae},'httpsAgent':agent}),_0x4e1bc3=_0x2fc38a[_0x182b54(0x20d)];if(!_0x4e1bc3||!_0x4e1bc3[0x0]?.[_0x182b54(0x20b)]||!_0x4e1bc3[0x0]?.['ObjectId']||!_0x4e1bc3[0x0]?.[_0x182b54(0x23f)])return _0x148afd['status'](0x190)['json']({'message':_0x182b54(0x211)});const {DataType:_0x5739d2,ObjectId:_0x51bbe5,PropertyName:_0x1e37c8}=_0x4e1bc3[0x0];console[_0x182b54(0x26b)](_0x201b76[_0x182b54(0x276)],{'DataType':_0x5739d2,'ObjectId':_0x51bbe5,'PropertyName':_0x1e37c8});const _0x55e5ad=await axios['post'](process[_0x182b54(0x252)][_0x182b54(0x269)]+_0x182b54(0x25b),{'sensorName':_0x470152,'description':_0x201b76[_0x182b54(0x23e)],'objectId':_0x51bbe5,'propertyName':_0x1e37c8,'dataType':_0x5739d2,'isActive':![]},{'headers':{'Authorization':_0x182b54(0x1fe)+_0xe3de57}});console[_0x182b54(0x26b)](_0x201b76[_0x182b54(0x21b)],_0x55e5ad[_0x182b54(0x20d)]),db[_0x182b54(0x1f5)](()=>{const _0x1b35a2=_0x182b54,_0x54e056={'ktbnx':_0x201b76['ARXSX'],'KYhBI':_0x201b76[_0x1b35a2(0x1f1)],'wqxUF':_0x201b76[_0x1b35a2(0x214)],'exQBZ':_0x1b35a2(0x244),'BKQZT':_0x201b76[_0x1b35a2(0x271)],'cyRrG':_0x1b35a2(0x24e),'vsSwC':function(_0xbc1691){return _0x201b76['SwoIH'](_0xbc1691);},'UVOdk':_0x201b76[_0x1b35a2(0x26a)]},_0x1d2e40=_0x1b35a2(0x1f8);db[_0x1b35a2(0x1ea)](_0x1d2e40,[_0x470152,_0x201b76[_0x1b35a2(0x23e)],_0x51bbe5,_0x1e37c8,_0x5739d2],async function(_0x101735){const _0x184a91=_0x1b35a2,_0x55c7ce={'obBWm':_0x184a91(0x228),'Vlzas':_0x54e056[_0x184a91(0x219)],'mMxyO':_0x54e056[_0x184a91(0x1ee)],'WxnoB':function(_0x5dc1b9,_0x22691b){return _0x5dc1b9||_0x22691b;},'FcABA':_0x184a91(0x1e6),'mKcyM':_0x54e056[_0x184a91(0x22b)],'TLFgH':_0x184a91(0x220)};if(_0x101735)return console['error'](_0x54e056[_0x184a91(0x224)],_0x101735['message']),_0x148afd[_0x184a91(0x21e)](0x1f4)[_0x184a91(0x1fc)]({'message':_0x54e056['BKQZT']});console['log'](_0x54e056[_0x184a91(0x23d)]),await _0x54e056['vsSwC'](updateLocalSensorIds),db[_0x184a91(0x213)](_0x54e056[_0x184a91(0x208)],[_0x51bbe5],(_0x26ed9b,_0x17ea7f)=>{const _0x2c4b7d=_0x184a91;if(_0x55c7ce['WxnoB'](_0x26ed9b,!_0x17ea7f))return console[_0x2c4b7d(0x278)](_0x55c7ce[_0x2c4b7d(0x257)],_0x26ed9b?.[_0x2c4b7d(0x260)]||_0x55c7ce[_0x2c4b7d(0x1eb)]),_0x148afd[_0x2c4b7d(0x21e)](0x1f4)[_0x2c4b7d(0x1fc)]({'message':_0x55c7ce[_0x2c4b7d(0x20c)]});const _0x57156d=_0x17ea7f['id'];db[_0x2c4b7d(0x213)](_0x2c4b7d(0x270),[_0x449b75],(_0x45cfc0,_0x4e5ba1)=>{const _0x474fa6=_0x2c4b7d,_0x19054d={'WZLbt':_0x55c7ce[_0x474fa6(0x272)],'yuFhc':_0x474fa6(0x212)};if(_0x45cfc0)return console[_0x474fa6(0x278)](_0x55c7ce[_0x474fa6(0x24a)],_0x45cfc0['message']),_0x148afd[_0x474fa6(0x21e)](0x1f4)[_0x474fa6(0x1fc)]({'message':_0x55c7ce[_0x474fa6(0x27c)]});if(_0x4e5ba1)return _0x148afd[_0x474fa6(0x21e)](0xc8)[_0x474fa6(0x1fc)]({'message':'Sensor\x20added\x20(API\x20already\x20existed)','sensorId':_0x57156d,'cloudResponse':_0x55e5ad[_0x474fa6(0x20d)]});const _0x4d1b49=_0x474fa6(0x1f6);db[_0x474fa6(0x1ea)](_0x4d1b49,[_0x57156d,_0x449b75],_0x37b6c8=>{const _0x243fdd=_0x474fa6;return _0x37b6c8?console[_0x243fdd(0x278)](_0x19054d[_0x243fdd(0x25e)],_0x37b6c8[_0x243fdd(0x260)]):console[_0x243fdd(0x26b)](_0x243fdd(0x200)+_0x57156d),_0x148afd[_0x243fdd(0x21e)](0xc8)[_0x243fdd(0x1fc)]({'message':_0x19054d[_0x243fdd(0x266)],'sensorId':_0x57156d,'cloudResponse':_0x55e5ad[_0x243fdd(0x20d)]});});});});});});}catch(_0xb762a8){console['error'](_0x201b76['UMHtb'],_0xb762a8),_0x148afd[_0x182b54(0x21e)](0x1f4)[_0x182b54(0x1fc)]({'message':_0x201b76[_0x182b54(0x22f)],'error':_0xb762a8['toString']()});}},deleteSensor=async(_0x4340cf,_0x213d7a)=>{const _0x3636a8=a8_0xfb3ca4,_0x40fb30={'UXSAp':_0x3636a8(0x261),'QTCGG':function(_0x26a879){return _0x26a879();},'cidIJ':_0x3636a8(0x24c),'Arqqy':_0x3636a8(0x21c),'LhIjW':_0x3636a8(0x264),'wrzHn':_0x3636a8(0x23c),'mdkxC':_0x3636a8(0x229)};try{const {id:_0x296cc0}=_0x4340cf['params'];console['log'](_0x3636a8(0x26c)+_0x296cc0);let _0xa31f25;try{_0xa31f25=await _0x40fb30[_0x3636a8(0x255)](getStoredToken);}catch(_0x17555d){return _0x213d7a[_0x3636a8(0x21e)](0x191)[_0x3636a8(0x1fc)]({'message':_0x3636a8(0x1ff)});}const _0x4e6d28=process[_0x3636a8(0x252)][_0x3636a8(0x269)]+_0x3636a8(0x221)+_0x296cc0;console[_0x3636a8(0x26b)](_0x3636a8(0x210)+_0x4e6d28);let _0x1ed319;try{_0x1ed319=await axios[_0x3636a8(0x258)](_0x4e6d28,{'headers':{'Authorization':_0x3636a8(0x1fe)+_0xa31f25}}),console[_0x3636a8(0x26b)](_0x40fb30['cidIJ'],_0x1ed319[_0x3636a8(0x20d)]);}catch(_0x2d2305){return console[_0x3636a8(0x278)](_0x40fb30[_0x3636a8(0x265)],_0x2d2305[_0x3636a8(0x22d)]?.[_0x3636a8(0x20d)]||_0x2d2305[_0x3636a8(0x260)]),_0x213d7a[_0x3636a8(0x21e)](0x1f4)[_0x3636a8(0x1fc)]({'message':_0x40fb30['LhIjW'],'error':_0x2d2305['response']?.[_0x3636a8(0x20d)]||_0x2d2305[_0x3636a8(0x260)]});}db[_0x3636a8(0x1f5)](()=>{const _0x5abc49=_0x3636a8,_0x2d1ee4={'Yoqpy':_0x40fb30[_0x5abc49(0x217)],'THnbh':_0x5abc49(0x1fb)};db[_0x5abc49(0x1ea)](_0x5abc49(0x1ef),[_0x296cc0],_0x26b1f5=>{const _0x50392f=_0x5abc49;if(_0x26b1f5)console[_0x50392f(0x278)](_0x2d1ee4[_0x50392f(0x256)],_0x26b1f5[_0x50392f(0x260)]);else console['log'](_0x50392f(0x24b)+_0x296cc0+'\x20deleted\x20from\x20LocalActiveSensors.');}),db[_0x5abc49(0x1ea)]('DELETE\x20FROM\x20LocalSensorAPIs\x20WHERE\x20sensor_id\x20=\x20?',[_0x296cc0],_0x1af7e8=>{const _0x343fcb=_0x5abc49;if(_0x1af7e8)console[_0x343fcb(0x278)]('âŒ\x20Error\x20deleting\x20from\x20LocalSensorAPIs:',_0x1af7e8[_0x343fcb(0x260)]);else console[_0x343fcb(0x26b)](_0x343fcb(0x24b)+_0x296cc0+_0x343fcb(0x218));}),db[_0x5abc49(0x1ea)](_0x5abc49(0x233),[_0x296cc0],_0x372e0b=>{const _0x785b52=_0x5abc49;if(_0x372e0b)console[_0x785b52(0x278)](_0x2d1ee4['THnbh'],_0x372e0b['message']);else console[_0x785b52(0x26b)](_0x785b52(0x24b)+_0x296cc0+_0x785b52(0x227));});}),_0x213d7a['status'](0xc8)[_0x3636a8(0x1fc)]({'message':_0x3636a8(0x27a),'cloudResponse':_0x1ed319[_0x3636a8(0x20d)]});}catch(_0x62be66){console['error'](_0x40fb30[_0x3636a8(0x234)],_0x62be66),_0x213d7a[_0x3636a8(0x21e)](0x1f4)[_0x3636a8(0x1fc)]({'message':_0x40fb30['mdkxC'],'error':_0x62be66[_0x3636a8(0x260)]});}},getAllSensors=async(_0x587e44,_0x141937)=>{const _0xa7bdf6=a8_0xfb3ca4,_0xa59034={'nuUyj':_0xa7bdf6(0x1ff),'BXRgI':_0xa7bdf6(0x1fa),'DPmsm':'Failed\x20to\x20fetch\x20sensors\x20from\x20cloud','Pjbnt':_0xa7bdf6(0x1e8),'LKrff':'Internal\x20Server\x20Error'};try{let _0x154ede;try{_0x154ede=await getStoredToken(),console[_0xa7bdf6(0x26b)](_0xa7bdf6(0x22e)+_0x154ede);}catch(_0x538bf0){return _0x141937[_0xa7bdf6(0x21e)](0x191)[_0xa7bdf6(0x1fc)]({'message':_0xa59034[_0xa7bdf6(0x1f2)]});}const _0x3b17d0=process['env'][_0xa7bdf6(0x269)]+_0xa7bdf6(0x225);console['log'](_0xa7bdf6(0x247)+_0x3b17d0);try{const _0x448716=await axios[_0xa7bdf6(0x213)](_0x3b17d0,{'headers':{'Authorization':_0xa7bdf6(0x1fe)+_0x154ede}});console['log'](_0xa7bdf6(0x25f),_0x448716[_0xa7bdf6(0x20d)]),_0x141937[_0xa7bdf6(0x21e)](0xc8)[_0xa7bdf6(0x1fc)]({'sensors':_0x448716[_0xa7bdf6(0x20d)]});}catch(_0x503ab1){console[_0xa7bdf6(0x278)](_0xa59034['BXRgI'],_0x503ab1['response']?.[_0xa7bdf6(0x20d)]||_0x503ab1[_0xa7bdf6(0x260)]),_0x141937[_0xa7bdf6(0x21e)](0x1f4)[_0xa7bdf6(0x1fc)]({'message':_0xa59034[_0xa7bdf6(0x25d)],'error':_0x503ab1[_0xa7bdf6(0x22d)]?.['data']||_0x503ab1[_0xa7bdf6(0x260)]});}}catch(_0x2f8b56){console['error'](_0xa59034[_0xa7bdf6(0x1ed)],_0x2f8b56),_0x141937[_0xa7bdf6(0x21e)](0x1f4)[_0xa7bdf6(0x1fc)]({'message':_0xa59034[_0xa7bdf6(0x240)],'error':_0x2f8b56[_0xa7bdf6(0x260)]});}},getStoredDesigoToken=async(_0xab8cc2,_0x3b1e5)=>{const _0xee17b8=a8_0xfb3ca4,_0x218902={'Kouqw':_0xee17b8(0x1f7),'yFcNl':_0xee17b8(0x274),'hZUzX':_0xee17b8(0x22a),'OVARt':'âŒ\x20Error\x20retrieving\x20Desigo\x20token:','SsQvt':_0xee17b8(0x229)};try{db[_0xee17b8(0x213)](_0xee17b8(0x250),[],(_0x2125fc,_0x4d89f4)=>{const _0x301f64=_0xee17b8;if(_0x2125fc||!_0x4d89f4)return console[_0x301f64(0x278)](_0x218902['Kouqw'],_0x2125fc?.[_0x301f64(0x260)]||_0x218902[_0x301f64(0x1e9)]),_0x3b1e5[_0x301f64(0x21e)](0x191)[_0x301f64(0x1fc)]({'message':_0x218902[_0x301f64(0x21f)]});_0x3b1e5[_0x301f64(0x21e)](0xc8)[_0x301f64(0x1fc)]({'desigoToken':_0x4d89f4[_0x301f64(0x203)]});});}catch(_0x33ebb2){console[_0xee17b8(0x278)](_0x218902[_0xee17b8(0x204)],_0x33ebb2[_0xee17b8(0x260)]),_0x3b1e5['status'](0x1f4)[_0xee17b8(0x1fc)]({'message':_0x218902[_0xee17b8(0x223)]});}},getAllLocalSensorsWithAPI=async(_0x217563,_0x4f438c)=>{const _0x504008=a8_0xfb3ca4,_0x2f142f={'TvUXt':_0x504008(0x206),'CcLxS':_0x504008(0x262),'YoHPj':_0x504008(0x229)};try{const _0x286872=_0x504008(0x239);db[_0x504008(0x22c)](_0x286872,[],(_0x3eeea9,_0x1fd69c)=>{const _0x4afa50=_0x504008;if(_0x3eeea9)return console[_0x4afa50(0x278)](_0x2f142f[_0x4afa50(0x202)],_0x3eeea9['message']),_0x4f438c[_0x4afa50(0x21e)](0x1f4)[_0x4afa50(0x1fc)]({'message':_0x2f142f[_0x4afa50(0x24f)],'error':_0x3eeea9[_0x4afa50(0x260)]});return _0x4f438c[_0x4afa50(0x21e)](0xc8)[_0x4afa50(0x1fc)]({'sensors':_0x1fd69c});});}catch(_0x4fb076){return console[_0x504008(0x278)](_0x504008(0x253),_0x4fb076[_0x504008(0x260)]),_0x4f438c[_0x504008(0x21e)](0x1f4)[_0x504008(0x1fc)]({'message':_0x2f142f[_0x504008(0x23a)],'error':_0x4fb076[_0x504008(0x260)]});}},getAllLocalAPIEndpoints=(_0x1cd9e3,_0x45c2e2)=>{const _0x2266e0=a8_0xfb3ca4,_0x895af8={'SBxAE':_0x2266e0(0x215),'oCoWm':_0x2266e0(0x222),'IBEhG':_0x2266e0(0x23b)},_0x442d2d=_0x895af8[_0x2266e0(0x241)];db[_0x2266e0(0x22c)](_0x442d2d,[],(_0x75ec7,_0x5264ca)=>{const _0x368fdc=_0x2266e0;if(_0x75ec7)return console[_0x368fdc(0x278)](_0x895af8[_0x368fdc(0x242)],_0x75ec7[_0x368fdc(0x260)]),_0x45c2e2[_0x368fdc(0x21e)](0x1f4)[_0x368fdc(0x1fc)]({'message':_0x895af8[_0x368fdc(0x26e)],'error':_0x75ec7[_0x368fdc(0x260)]});return _0x45c2e2['status'](0xc8)[_0x368fdc(0x1fc)]({'api_endpoints':_0x5264ca});});};function a8_0x5d0d(_0x24e932,_0x2c342b){const _0x5bbce8=a8_0x5bbc();return a8_0x5d0d=function(_0x5d0d01,_0x3a284b){_0x5d0d01=_0x5d0d01-0x1e6;let _0x560591=_0x5bbce8[_0x5d0d01];return _0x560591;},a8_0x5d0d(_0x24e932,_0x2c342b);}module[a8_0xfb3ca4(0x1f3)]={'addSensor':addSensor,'getAllSensors':getAllSensors,'deleteSensor':deleteSensor,'getStoredDesigoToken':getStoredDesigoToken,'getAllLocalSensorsWithAPI':getAllLocalSensorsWithAPI,'getAllLocalAPIEndpoints':getAllLocalAPIEndpoints};