const a2_0x20d67b=a2_0x15bb;(function(_0x101300,_0x486ff1){const _0xa329af=a2_0x15bb,_0xe8b479=_0x101300();while(!![]){try{const _0x4b6750=-parseInt(_0xa329af(0xf1))/0x1*(-parseInt(_0xa329af(0xfe))/0x2)+-parseInt(_0xa329af(0xee))/0x3+-parseInt(_0xa329af(0xf8))/0x4+-parseInt(_0xa329af(0xe5))/0x5+parseInt(_0xa329af(0xe0))/0x6+parseInt(_0xa329af(0xfa))/0x7+-parseInt(_0xa329af(0xf6))/0x8;if(_0x4b6750===_0x486ff1)break;else _0xe8b479['push'](_0xe8b479['shift']());}catch(_0x3d5743){_0xe8b479['push'](_0xe8b479['shift']());}}}(a2_0x4c6b,0x29910));function a2_0x4c6b(){const _0x2f1e18=['❌\x20Error\x20logging\x20out:','tpXem','607606ZrpIiJ','/api/staff/app/auth/verify-otp','dotenv','CLOUD_API_URL','status','json','exports','232674wSqUZf','PLRxQ','Failed\x20to\x20refresh\x20token','INSERT\x20INTO\x20AuthTokens\x20(token)\x20VALUES\x20(?)','/api/staff/app/auth/send-otp','366225KZCSok','vfUIf','KwgQT','data','❌\x20Error\x20refreshing\x20token:','post','/api/staff/app/auth/refresh-token','config','❌\x20Error\x20sending\x20OTP:','857106CcHQvl','response','message','1ualelL','accessToken','env','run','❌\x20Error\x20verifying\x20OTP:','37600FkpMvg','body','283184nQwvwG','/api/staff/app/auth/logout','1834819fddzTI','error'];a2_0x4c6b=function(){return _0x2f1e18;};return a2_0x4c6b();}function a2_0x15bb(_0x39aae2,_0x7bebd3){const _0x4c6ba1=a2_0x4c6b();return a2_0x15bb=function(_0x15bb52,_0x17f5a0){_0x15bb52=_0x15bb52-0xdf;let _0x18dcba=_0x4c6ba1[_0x15bb52];return _0x18dcba;},a2_0x15bb(_0x39aae2,_0x7bebd3);}const axios=require('axios'),db=require('../db/localDB');require(a2_0x20d67b(0x100))[a2_0x20d67b(0xec)]();const sendStaffAppLoginOtp=async(_0x361bf4,_0x56afb3)=>{const _0xb7386b=a2_0x20d67b,_0x46c170={'vfUIf':'Failed\x20to\x20send\x20OTP'};try{const _0x1ee3ec=process[_0xb7386b(0xf3)][_0xb7386b(0x101)]+_0xb7386b(0xe4),_0x2f1ad4=await axios[_0xb7386b(0xea)](_0x1ee3ec,_0x361bf4[_0xb7386b(0xf7)]);_0x56afb3[_0xb7386b(0x102)](_0x2f1ad4['status'])[_0xb7386b(0x103)](_0x2f1ad4[_0xb7386b(0xe8)]);}catch(_0x18cba6){console[_0xb7386b(0xfb)](_0xb7386b(0xed),_0x18cba6['response']?.['data']||_0x18cba6[_0xb7386b(0xf0)]),_0x56afb3[_0xb7386b(0x102)](_0x18cba6['response']?.['status']||0x1f4)[_0xb7386b(0x103)]({'message':_0x46c170[_0xb7386b(0xe6)],'error':_0x18cba6['response']?.[_0xb7386b(0xe8)]||_0x18cba6[_0xb7386b(0xf0)]});}},verifyStaffAppLoginOtp=async(_0x11b8c6,_0x3a7c90)=>{const _0x32a535=a2_0x20d67b;try{const _0x1c2a4e=process['env'][_0x32a535(0x101)]+_0x32a535(0xff),_0x84af39=await axios['post'](_0x1c2a4e,_0x11b8c6[_0x32a535(0xf7)]),_0x1e0ebd=_0x84af39[_0x32a535(0xe8)][_0x32a535(0xf2)];db[_0x32a535(0xf4)]('DELETE\x20FROM\x20AuthTokens'),db[_0x32a535(0xf4)](_0x32a535(0xe3),[_0x1e0ebd]),_0x3a7c90[_0x32a535(0x102)](_0x84af39[_0x32a535(0x102)])[_0x32a535(0x103)](_0x84af39['data']);}catch(_0x3c6487){console[_0x32a535(0xfb)](_0x32a535(0xf5),_0x3c6487[_0x32a535(0xef)]?.[_0x32a535(0xe8)]||_0x3c6487[_0x32a535(0xf0)]),_0x3a7c90[_0x32a535(0x102)](_0x3c6487[_0x32a535(0xef)]?.[_0x32a535(0x102)]||0x1f4)[_0x32a535(0x103)]({'message':'Failed\x20to\x20verify\x20OTP','error':_0x3c6487[_0x32a535(0xef)]?.[_0x32a535(0xe8)]||_0x3c6487[_0x32a535(0xf0)]});}},refreshStaffAppToken=async(_0x690113,_0x2d64d4)=>{const _0x11f559=a2_0x20d67b,_0xce2332={'KwgQT':_0x11f559(0xe9),'tpXem':_0x11f559(0xe2)};try{const _0x9f125b=process[_0x11f559(0xf3)][_0x11f559(0x101)]+_0x11f559(0xeb),_0xe35f70=await axios['post'](_0x9f125b,_0x690113[_0x11f559(0xf7)]);_0x2d64d4[_0x11f559(0x102)](_0xe35f70[_0x11f559(0x102)])[_0x11f559(0x103)](_0xe35f70[_0x11f559(0xe8)]);}catch(_0x5c95e8){console[_0x11f559(0xfb)](_0xce2332[_0x11f559(0xe7)],_0x5c95e8[_0x11f559(0xef)]?.[_0x11f559(0xe8)]||_0x5c95e8['message']),_0x2d64d4[_0x11f559(0x102)](_0x5c95e8[_0x11f559(0xef)]?.[_0x11f559(0x102)]||0x1f4)[_0x11f559(0x103)]({'message':_0xce2332[_0x11f559(0xfd)],'error':_0x5c95e8[_0x11f559(0xef)]?.[_0x11f559(0xe8)]||_0x5c95e8['message']});}},logoutStaffApp=async(_0x5bbb87,_0x23b740)=>{const _0x3e5fa4=a2_0x20d67b,_0x32f5fa={'PLRxQ':_0x3e5fa4(0xfc)};try{const _0x1f19bf=process[_0x3e5fa4(0xf3)][_0x3e5fa4(0x101)]+_0x3e5fa4(0xf9),_0x3aacc4=await axios[_0x3e5fa4(0xea)](_0x1f19bf,_0x5bbb87[_0x3e5fa4(0xf7)]);db[_0x3e5fa4(0xf4)]('DELETE\x20FROM\x20AuthTokens'),_0x23b740['status'](_0x3aacc4['status'])[_0x3e5fa4(0x103)](_0x3aacc4[_0x3e5fa4(0xe8)]);}catch(_0x1f74d8){console['error'](_0x32f5fa[_0x3e5fa4(0xe1)],_0x1f74d8[_0x3e5fa4(0xef)]?.[_0x3e5fa4(0xe8)]||_0x1f74d8[_0x3e5fa4(0xf0)]),_0x23b740[_0x3e5fa4(0x102)](_0x1f74d8[_0x3e5fa4(0xef)]?.[_0x3e5fa4(0x102)]||0x1f4)['json']({'message':'Failed\x20to\x20logout','error':_0x1f74d8['response']?.[_0x3e5fa4(0xe8)]||_0x1f74d8[_0x3e5fa4(0xf0)]});}};module[a2_0x20d67b(0xdf)]={'sendStaffAppLoginOtp':sendStaffAppLoginOtp,'verifyStaffAppLoginOtp':verifyStaffAppLoginOtp,'refreshStaffAppToken':refreshStaffAppToken,'logoutStaffApp':logoutStaffApp};