const a0_0x4caa3c=a0_0x1984;function a0_0x1984(_0x2a23af,_0x34e5d5){const _0x512022=a0_0x5120();return a0_0x1984=function(_0x19849e,_0x2f7387){_0x19849e=_0x19849e-0xa2;let _0x4447b9=_0x512022[_0x19849e];return _0x4447b9;},a0_0x1984(_0x2a23af,_0x34e5d5);}(function(_0xbc3daf,_0x547606){const _0x1a693d=a0_0x1984,_0x4a56ae=_0xbc3daf();while(!![]){try{const _0x49a528=parseInt(_0x1a693d(0xca))/0x1*(parseInt(_0x1a693d(0xd6))/0x2)+parseInt(_0x1a693d(0xd4))/0x3+-parseInt(_0x1a693d(0xc6))/0x4*(parseInt(_0x1a693d(0xb9))/0x5)+parseInt(_0x1a693d(0xc8))/0x6+-parseInt(_0x1a693d(0xb6))/0x7+parseInt(_0x1a693d(0xae))/0x8*(parseInt(_0x1a693d(0xa8))/0x9)+-parseInt(_0x1a693d(0xa2))/0xa*(parseInt(_0x1a693d(0xcb))/0xb);if(_0x49a528===_0x547606)break;else _0x4a56ae['push'](_0x4a56ae['shift']());}catch(_0x18a28c){_0x4a56ae['push'](_0x4a56ae['shift']());}}}(a0_0x5120,0x8e3c1));const {db}=require(a0_0x4caa3c(0xb4)),jwt=require(a0_0x4caa3c(0xb8));require(a0_0x4caa3c(0xaa))[a0_0x4caa3c(0xbb)]();const getAdminDetailsFromToken=_0x56d173=>{const _0x37f4d2=a0_0x4caa3c,_0x326a92={'Hfrvj':_0x37f4d2(0xa9),'vaPiq':_0x37f4d2(0xb0),'PzRmh':_0x37f4d2(0xd2),'FvCHP':'❌\x20Token\x20decoding\x20failed:'};try{const _0x5c7be8=_0x56d173['headers'][_0x37f4d2(0xb7)];if(!_0x5c7be8||!_0x5c7be8['startsWith'](_0x326a92[_0x37f4d2(0xa7)]))return console['error'](_0x326a92[_0x37f4d2(0xaf)]),null;const _0x54b789=_0x5c7be8[_0x37f4d2(0xda)]('\x20')[0x1],_0x15f0bb=jwt[_0x37f4d2(0xac)](_0x54b789,process[_0x37f4d2(0xad)][_0x37f4d2(0xd7)]);if(!_0x15f0bb[_0x37f4d2(0xa5)])return console['error'](_0x326a92[_0x37f4d2(0xce)],_0x15f0bb),null;return{'companyId':_0x15f0bb[_0x37f4d2(0xa5)],'adminId':_0x15f0bb[_0x37f4d2(0xb1)],'subSites':_0x15f0bb[_0x37f4d2(0xd1)]};}catch(_0x53366f){return console[_0x37f4d2(0xbf)](_0x326a92['FvCHP'],_0x53366f[_0x37f4d2(0xe1)]),null;}},getSubsiteSensorJobStatus=(_0xcbaf85,_0x26c225)=>{const _0x1fde18=a0_0x4caa3c,_0x10cce9={'hurVi':_0x1fde18(0xcd),'ZWlTA':_0x1fde18(0xc9),'wVRud':function(_0xee4e30,_0x6c641c){return _0xee4e30(_0x6c641c);},'PdiIL':function(_0x5b6930,_0x5e6453){return _0x5b6930||_0x5e6453;},'NWFYP':_0x1fde18(0xc4)},_0x54a601=_0xcbaf85[_0x1fde18(0xe3)]['bank_id'],_0x521d9a=_0xcbaf85['query'][_0x1fde18(0xc1)],{companyId:_0x1a80d2}=_0x10cce9[_0x1fde18(0xab)](getAdminDetailsFromToken,_0xcbaf85)||{};if(_0x10cce9[_0x1fde18(0xdd)](!_0x54a601,!_0x521d9a)||!_0x1a80d2)return _0x26c225[_0x1fde18(0xbd)](0x190)['json']({'message':_0x10cce9[_0x1fde18(0xb5)]});const _0x6a6b90='Sensor_'+_0x1a80d2+'_'+_0x521d9a,_0x30a6b6='IntervalControl_'+_0x1a80d2+'_'+_0x521d9a,_0x540d74=_0x1fde18(0xe0)+_0x30a6b6+'.is_fetching,\x20'+_0x30a6b6+_0x1fde18(0xc3)+_0x30a6b6+_0x1fde18(0xdc)+_0x6a6b90+'\x20ON\x20'+_0x30a6b6+'.sensor_id\x20=\x20'+_0x6a6b90+_0x1fde18(0xcc)+_0x6a6b90+_0x1fde18(0xdf);db['get'](_0x540d74,[_0x54a601],(_0x5d1084,_0x2d3424)=>{const _0x536839=_0x1fde18;if(_0x5d1084)return console[_0x536839(0xbf)](_0x10cce9[_0x536839(0xd3)],_0x5d1084['message']),_0x26c225[_0x536839(0xbd)](0x1f4)['json']({'message':_0x10cce9['ZWlTA']});if(!_0x2d3424)return console[_0x536839(0xa3)](_0x536839(0xc2)+_0x54a601+'\x20not\x20found\x20in\x20IntervalControl\x20—\x20treating\x20as\x20idle'),_0x26c225[_0x536839(0xbd)](0xc8)[_0x536839(0xe4)]({'is_fetching':![],'is_sending':![]});return _0x26c225[_0x536839(0xbd)](0xc8)[_0x536839(0xe4)]({'is_fetching':!!_0x2d3424[_0x536839(0xa4)],'is_sending':!!_0x2d3424[_0x536839(0xd8)]});});},getAllSubsiteSensorJobStatuses=(_0x29f450,_0x5f12c0)=>{const _0x1e1b69=a0_0x4caa3c,_0x6c41d2={'pplev':_0x1e1b69(0xc9),'jqEzW':function(_0xcbc457,_0x12e5a2){return _0xcbc457(_0x12e5a2);},'NLUhG':function(_0x5dddf7,_0x353a09){return _0x5dddf7||_0x353a09;}},_0x2c1b4f=_0x29f450['query'][_0x1e1b69(0xc1)],{companyId:_0xf84f90}=_0x6c41d2[_0x1e1b69(0xd0)](getAdminDetailsFromToken,_0x29f450)||{};if(_0x6c41d2['NLUhG'](!_0x2c1b4f,!_0xf84f90))return _0x5f12c0['status'](0x190)[_0x1e1b69(0xe4)]({'message':_0x1e1b69(0xc5)});const _0x57f0e7=_0x1e1b69(0xc0)+_0xf84f90+'_'+_0x2c1b4f,_0x5dd854=_0x1e1b69(0xbc)+_0xf84f90+'_'+_0x2c1b4f,_0x1676a5=_0x1e1b69(0xde)+_0x5dd854+_0x1e1b69(0xdb)+_0x57f0e7+_0x1e1b69(0xcf)+_0x5dd854+_0x1e1b69(0xd5)+_0x5dd854+'.is_sending\x0a\x20\x20\x20\x20FROM\x20'+_0x5dd854+_0x1e1b69(0xdc)+_0x57f0e7+_0x1e1b69(0xa6)+_0x5dd854+_0x1e1b69(0xb3)+_0x57f0e7+_0x1e1b69(0xd9);db[_0x1e1b69(0xe2)](_0x1676a5,[],(_0x17a47b,_0x12aaff)=>{const _0x5520a7=_0x1e1b69;if(_0x17a47b)return console[_0x5520a7(0xbf)](_0x5520a7(0xb2),_0x17a47b[_0x5520a7(0xe1)]),_0x5f12c0[_0x5520a7(0xbd)](0x1f4)[_0x5520a7(0xe4)]({'message':_0x6c41d2['pplev']});const _0x42a7d7={};return _0x12aaff[_0x5520a7(0xc7)](_0xff7d8b=>{const _0x2561ac=_0x5520a7;_0x42a7d7[_0xff7d8b[_0x2561ac(0xbe)]]={'is_fetching':!!_0xff7d8b[_0x2561ac(0xa4)],'is_sending':!!_0xff7d8b[_0x2561ac(0xd8)]};}),_0x5f12c0[_0x5520a7(0xbd)](0xc8)[_0x5520a7(0xe4)](_0x42a7d7);});};module[a0_0x4caa3c(0xba)]={'getSubsiteSensorJobStatus':getSubsiteSensorJobStatus,'getAllSubsiteSensorJobStatuses':getAllSubsiteSensorJobStatuses};function a0_0x5120(){const _0x99803c=['11RXkpSW','.id\x0a\x20\x20\x20\x20WHERE\x20','❌\x20DB\x20error\x20in\x20sub-site\x20job\x20status\x20fetch:','PzRmh','.bank_id\x20AS\x20bank_id,\x0a\x20\x20\x20\x20\x20\x20','jqEzW','subSites','❌\x20companyId\x20missing\x20in\x20JWT\x20payload:','hurVi','2309853OJFgOM','.is_fetching,\x0a\x20\x20\x20\x20\x20\x20','10mgYXNw','JWT_SECRET_APP','is_sending','.id\x0a\x20\x20','split','.sensor_id\x20AS\x20local_id,\x0a\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20JOIN\x20','PdiIL','\x0a\x20\x20\x20\x20SELECT\x0a\x20\x20\x20\x20\x20\x20','.bank_id\x20=\x20?\x0a\x20\x20','\x0a\x20\x20\x20\x20SELECT\x20','message','all','query','json','17372420ebXIBU','warn','is_fetching','companyId','\x20ON\x20','Hfrvj','99BiNJZG','Bearer\x20','dotenv','wVRud','verify','env','397256CfcnEY','vaPiq','❌\x20Missing\x20or\x20malformed\x20Authorization\x20header','adminId','❌\x20DB\x20error\x20in\x20sub-site\x20job\x20status\x20fetch\x20all:','.sensor_id\x20=\x20','../db/sensorDB','NWFYP','1870386lHsNmC','authorization','jsonwebtoken','3670tHfEyX','exports','config','IntervalControl_','status','bank_id','error','Sensor_','subsite_id','ℹ️\x20Sensor\x20bank_id=','.is_sending\x0a\x20\x20\x20\x20FROM\x20','Missing\x20bank_id\x20or\x20subsite_id\x20or\x20token','Missing\x20subsite_id\x20or\x20token','2036xVJYiR','forEach','5877456klvqci','DB\x20error','132977BXZxjv'];a0_0x5120=function(){return _0x99803c;};return a0_0x5120();}