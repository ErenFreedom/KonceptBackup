const a0_0x20e2c9=a0_0x5eaf;(function(_0x2442c1,_0xcdad4){const _0x1161de=a0_0x5eaf,_0x4ae211=_0x2442c1();while(!![]){try{const _0x49ebf1=-parseInt(_0x1161de(0x197))/0x1*(parseInt(_0x1161de(0x18c))/0x2)+parseInt(_0x1161de(0x18e))/0x3*(parseInt(_0x1161de(0x185))/0x4)+-parseInt(_0x1161de(0x195))/0x5*(-parseInt(_0x1161de(0x18a))/0x6)+parseInt(_0x1161de(0x1a9))/0x7*(parseInt(_0x1161de(0x192))/0x8)+parseInt(_0x1161de(0x1a0))/0x9+parseInt(_0x1161de(0x183))/0xa*(-parseInt(_0x1161de(0x196))/0xb)+parseInt(_0x1161de(0x198))/0xc*(-parseInt(_0x1161de(0x190))/0xd);if(_0x49ebf1===_0xcdad4)break;else _0x4ae211['push'](_0x4ae211['shift']());}catch(_0x2e0e2d){_0x4ae211['push'](_0x4ae211['shift']());}}}(a0_0x311e,0xef66a));function a0_0x5eaf(_0x10d773,_0x501988){const _0x311ea2=a0_0x311e();return a0_0x5eaf=function(_0x5eaf8a,_0x27ce94){_0x5eaf8a=_0x5eaf8a-0x182;let _0x130289=_0x311ea2[_0x5eaf8a];return _0x130289;},a0_0x5eaf(_0x10d773,_0x501988);}const axios=require(a0_0x20e2c9(0x188)),os=require('os'),{db}=require('../db/sensorDB'),https=require('https'),httpsAgent=new https[(a0_0x20e2c9(0x187))]({'rejectUnauthorized':![]}),checkDesigoHeartbeat=async(_0x47e94e,_0x22e1ea)=>{const _0x363095=a0_0x20e2c9,_0x387d60={'jFify':function(_0x22488a,_0x369989){return _0x22488a||_0x369989;},'dJcjP':'No\x20Desigo\x20token\x20found.','HSWFP':'SELECT\x20token\x20FROM\x20DesigoAuthTokens\x20ORDER\x20BY\x20id\x20DESC\x20LIMIT\x201','IJysZ':_0x363095(0x186),'jcBxO':'online','XwKzb':_0x363095(0x1a2),'bmNeO':'‚ö†Ô∏è\x20Real\x20server\x20connection\x20failed:','THhcK':function(_0x45ed9d,_0x32f9fa){return _0x45ed9d>=_0x32f9fa;},'WRpQl':function(_0x23a945,_0x1e38c2){return _0x23a945<_0x1e38c2;},'HdnSG':_0x363095(0x194),'cmXQu':_0x363095(0x1a5),'WGXqE':'‚ùå\x20Heartbeat\x20check\x20critical\x20error:','dWuTS':_0x363095(0x19f)};try{const _0x4b8017=await new Promise((_0x217d9d,_0x17b0eb)=>{const _0x3bb7ad=_0x363095;db[_0x3bb7ad(0x1a1)](_0x387d60['HSWFP'],(_0x566ce1,_0x975214)=>{const _0x128b94=_0x3bb7ad;if(_0x387d60['jFify'](_0x566ce1,!_0x975214))_0x17b0eb(_0x387d60[_0x128b94(0x18d)]);else _0x217d9d(_0x975214);});}),_0x172294=_0x4b8017[_0x363095(0x19c)],_0x5985dc=os[_0x363095(0x1a3)]()[_0x363095(0x19a)];console[_0x363095(0x184)]('üßë\x20Logged-in\x20Windows\x20User:\x20'+_0x5985dc);const _0x3f40b2='https://'+_0x5985dc+_0x363095(0x19d),_0x463ecf=_0x363095(0x189);try{const _0x2c48e7=await axios['post'](_0x3f40b2,{},{'headers':{'Authorization':_0x363095(0x1ac)+_0x172294},'timeout':0x1388,'validateStatus':()=>!![],'httpsAgent':httpsAgent});if(_0x2c48e7['status']>=0xc8&&_0x2c48e7[_0x363095(0x193)]<0x190)return console[_0x363095(0x184)](_0x387d60['IJysZ']),_0x22e1ea[_0x363095(0x193)](0xc8)[_0x363095(0x1a8)]({'status':_0x387d60[_0x363095(0x1a7)]});else console[_0x363095(0x1a6)](_0x387d60[_0x363095(0x1a4)]);}catch(_0xbeaa7d){console[_0x363095(0x1a6)](_0x387d60[_0x363095(0x19b)],_0xbeaa7d[_0x363095(0x1aa)]);}try{const _0x22109a=await axios[_0x363095(0x19e)](_0x463ecf,{},{'headers':{'Authorization':'Bearer\x20'+_0x172294},'timeout':0xbb8,'validateStatus':()=>!![],'httpsAgent':httpsAgent});if(_0x387d60[_0x363095(0x1ad)](_0x22109a[_0x363095(0x193)],0xc8)&&_0x387d60[_0x363095(0x18b)](_0x22109a['status'],0x190))return console[_0x363095(0x184)](_0x363095(0x182)),_0x22e1ea['status'](0xc8)['json']({'status':_0x387d60[_0x363095(0x1a7)]});else console[_0x363095(0x1a6)](_0x387d60[_0x363095(0x1ab)]);}catch(_0x11b62b){console['warn'](_0x387d60[_0x363095(0x18f)],_0x11b62b[_0x363095(0x1aa)]);}return console[_0x363095(0x199)]('‚ùå\x20Both\x20servers\x20offline.'),_0x22e1ea[_0x363095(0x193)](0xc8)[_0x363095(0x1a8)]({'status':'offline'});}catch(_0x64e54b){return console[_0x363095(0x199)](_0x387d60['WGXqE'],_0x64e54b['message']||_0x64e54b),_0x22e1ea['status'](0xc8)[_0x363095(0x1a8)]({'status':_0x387d60['dWuTS']});}};module[a0_0x20e2c9(0x191)]={'checkDesigoHeartbeat':checkDesigoHeartbeat};function a0_0x311e(){const _0x5df90e=['axios','http://localhost:8085/WSI/api/Heartbeat','13182PEXBeW','WRpQl','2892394voNFEd','dJcjP','2405013ceRPNi','cmXQu','8537503uJlkei','exports','184SyAFHf','status','‚ö†Ô∏è\x20Dummy\x20Desigo\x20heartbeat\x20failed\x20too...','440HOisBW','69410nTQdPH','1NDomMf','12zCmrhd','error','username','bmNeO','token',':443/WSI/api/Heartbeat','post','offline','17511732RPozPQ','get','‚ö†Ô∏è\x20Real\x20Desigo\x20heartbeat\x20failed,\x20trying\x20dummy\x20server...','userInfo','XwKzb','‚ö†Ô∏è\x20Dummy\x20server\x20connection\x20failed:','warn','jcBxO','json','364161JKxhDf','message','HdnSG','Bearer\x20','THhcK','‚úÖ\x20Dummy\x20Desigo\x20Server\x20is\x20ONLINE','1670QgtYzU','log','4rxQAWm','‚úÖ\x20Real\x20Desigo\x20Server\x20is\x20ONLINE','Agent'];a0_0x311e=function(){return _0x5df90e;};return a0_0x311e();}