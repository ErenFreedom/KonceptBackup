const a0_0x33a42f=a0_0x4ace;(function(_0x49da55,_0x427bda){const _0x335232=a0_0x4ace,_0x10deb6=_0x49da55();while(!![]){try{const _0x2e75ee=-parseInt(_0x335232(0x16c))/0x1+-parseInt(_0x335232(0x16a))/0x2*(parseInt(_0x335232(0x15e))/0x3)+-parseInt(_0x335232(0x14a))/0x4*(parseInt(_0x335232(0x162))/0x5)+-parseInt(_0x335232(0x16e))/0x6*(-parseInt(_0x335232(0x17a))/0x7)+parseInt(_0x335232(0x176))/0x8*(parseInt(_0x335232(0x17c))/0x9)+parseInt(_0x335232(0x147))/0xa+parseInt(_0x335232(0x17b))/0xb;if(_0x2e75ee===_0x427bda)break;else _0x10deb6['push'](_0x10deb6['shift']());}catch(_0x5277ab){_0x10deb6['push'](_0x10deb6['shift']());}}}(a0_0x3baf,0x98fcf));const axios=require('axios'),{db,createSensorDataTable}=require(a0_0x33a42f(0x151)),CLOUD_SYNC_ENDPOINT=process['env'][a0_0x33a42f(0x179)]+a0_0x33a42f(0x178),syncFromCloud=async(_0x4860f7,_0x13daa2)=>{const _0x4f5373=a0_0x33a42f,_0x147a49={'ZDrqJ':_0x4f5373(0x164),'MaBol':'❌\x20Failed\x20to\x20insert\x20into\x20LocalSensorBank:','Bqrul':'❌\x20Failed\x20to\x20insert\x20into\x20LocalActiveSensors:','NwIFR':_0x4f5373(0x161),'PgxTY':function(_0x2e4992,_0x1aea7c,_0x1ffaf5){return _0x2e4992(_0x1aea7c,_0x1ffaf5);},'FTxYb':'Authorization\x20token\x20missing','wICSJ':'SELECT\x20id\x20FROM\x20LocalSensorBank\x20WHERE\x20id\x20=\x20?','bnoDW':_0x4f5373(0x14d),'cQhVU':_0x4f5373(0x17f),'ppRAu':_0x4f5373(0x168)};try{const _0x8dfad=_0x4860f7[_0x4f5373(0x14b)]['authorization']?.[_0x4f5373(0x180)]('\x20')[0x1];if(!_0x8dfad)return _0x13daa2[_0x4f5373(0x163)](0x191)[_0x4f5373(0x165)]({'message':_0x147a49[_0x4f5373(0x172)]});const _0x23a6df=await axios['get'](CLOUD_SYNC_ENDPOINT,{'headers':{'Authorization':'Bearer\x20'+_0x8dfad}}),{sensorBank:_0x37ee1e,activeSensors:_0x29e4ac,sensorApis:_0x2d8336,sensorDataTables:_0x56b199}=_0x23a6df[_0x4f5373(0x15a)];for(const _0x117831 of _0x37ee1e){db[_0x4f5373(0x153)](_0x147a49[_0x4f5373(0x160)],[_0x117831['id']],async(_0x1888cf,_0x1e1236)=>{const _0x5018d0=_0x4f5373,_0x4e3cf5={'otSEn':_0x147a49['MaBol'],'acAup':_0x147a49[_0x5018d0(0x167)]};if(_0x1888cf)return console[_0x5018d0(0x159)](_0x147a49[_0x5018d0(0x15b)],_0x1888cf[_0x5018d0(0x177)]);if(!_0x1e1236){db['run'](_0x5018d0(0x173),[_0x117831['id'],_0x117831[_0x5018d0(0x158)],_0x117831['description']||null,_0x117831[_0x5018d0(0x174)],_0x117831[_0x5018d0(0x14c)],_0x117831[_0x5018d0(0x17e)],_0x117831[_0x5018d0(0x175)],_0x117831[_0x5018d0(0x152)]||null,_0x117831[_0x5018d0(0x169)],_0x117831[_0x5018d0(0x166)]],_0x37572a=>{const _0x30ee36=_0x5018d0;if(_0x37572a)console[_0x30ee36(0x159)](_0x4e3cf5[_0x30ee36(0x156)],_0x37572a[_0x30ee36(0x177)]);});const _0x2df9bc=_0x29e4ac[_0x5018d0(0x16d)](_0x495969=>_0x495969[_0x5018d0(0x16b)]===_0x117831['id']);_0x2df9bc&&db[_0x5018d0(0x150)](_0x5018d0(0x148),[_0x2df9bc['id'],_0x2df9bc[_0x5018d0(0x16b)],_0x2df9bc['is_active'],_0x2df9bc[_0x5018d0(0x169)],_0x2df9bc[_0x5018d0(0x166)]],_0xe03d29=>{const _0x1316cd=_0x5018d0;if(_0xe03d29)console['error'](_0x4e3cf5[_0x1316cd(0x170)],_0xe03d29[_0x1316cd(0x177)]);});const _0xfbe74b=_0x2d8336[_0x5018d0(0x171)](_0x4b655c=>_0x4b655c[_0x5018d0(0x14e)]===_0x117831['id']);for(const _0xa6a8d8 of _0xfbe74b){db[_0x5018d0(0x150)]('INSERT\x20INTO\x20LocalSensorAPIs\x20(id,\x20sensor_id,\x20api_endpoint,\x20created_at)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?)',[_0xa6a8d8['id'],_0xa6a8d8['sensor_id'],_0xa6a8d8[_0x5018d0(0x16f)],_0xa6a8d8['created_at']],_0x42fea5=>{const _0x553c4b=_0x5018d0;if(_0x42fea5)console[_0x553c4b(0x159)](_0x147a49[_0x553c4b(0x15d)],_0x42fea5['message']);});}const _0x51d0d9=_0x56b199['filter'](_0x46c081=>_0x46c081[_0x5018d0(0x15f)]('_'+_0x117831['id']));for(const _0x4eeabb of _0x51d0d9){const _0x29ccf6=_0x4eeabb[_0x5018d0(0x180)]('_'),_0x1b3120=_0x29ccf6[0x1],_0x50fe63=_0x29ccf6[0x2];await _0x147a49[_0x5018d0(0x154)](createSensorDataTable,_0x1b3120,_0x50fe63);}}else console[_0x5018d0(0x14f)](_0x5018d0(0x149)+_0x117831['id']+_0x5018d0(0x17d));});}_0x13daa2[_0x4f5373(0x163)](0xc8)[_0x4f5373(0x165)]({'message':_0x147a49[_0x4f5373(0x15c)]});}catch(_0x481776){console[_0x4f5373(0x159)](_0x147a49[_0x4f5373(0x155)],_0x481776['message']),_0x13daa2[_0x4f5373(0x163)](0x1f4)['json']({'message':_0x147a49[_0x4f5373(0x181)],'error':_0x481776[_0x4f5373(0x177)]});}};function a0_0x4ace(_0x49c5c2,_0x542eb7){const _0x3baf52=a0_0x3baf();return a0_0x4ace=function(_0x4ace9d,_0x262a08){_0x4ace9d=_0x4ace9d-0x147;let _0x569347=_0x3baf52[_0x4ace9d];return _0x569347;},a0_0x4ace(_0x49c5c2,_0x542eb7);}function a0_0x3baf(){const _0x35ee54=['acAup','filter','FTxYb','INSERT\x20INTO\x20LocalSensorBank\x20(id,\x20name,\x20description,\x20object_id,\x20property_name,\x20data_type,\x20is_active,\x20room_id,\x20created_at,\x20updated_at)\x0a\x20\x20\x20VALUES\x20(?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?,\x20?)','object_id','is_active','471160luJUGS','message','/api/cloud/sync/local-db','CLOUD_API_URL','3486itxdeu','3069374nVASen','63lVkVfp','\x20as\x20it\x20already\x20exists\x20locally.','data_type','❌\x20Sync\x20from\x20cloud\x20failed:','split','ppRAu','7326650iFLljb','INSERT\x20INTO\x20LocalActiveSensors\x20(id,\x20bank_id,\x20mode,\x20interval_seconds,\x20batch_size,\x20is_active,\x20created_at,\x20updated_at)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20VALUES\x20(?,\x20?,\x20\x27manual\x27,\x2010,\x201,\x20?,\x20?,\x20?)','⏩\x20Skipping\x20sensor\x20','1532bHpXFy','headers','property_name','✅\x20Local\x20DB\x20synced\x20from\x20cloud\x20(without\x20duplication).','sensor_id','log','run','../db/sensorDB','room_id','get','PgxTY','cQhVU','otSEn','exports','name','error','data','NwIFR','bnoDW','ZDrqJ','16737AhdhOD','endsWith','wICSJ','❌\x20Error\x20checking\x20LocalSensorBank:','8390arkdkl','status','❌\x20Failed\x20to\x20insert\x20into\x20LocalSensorAPIs:','json','updated_at','Bqrul','Failed\x20to\x20sync\x20from\x20cloud','created_at','44TEyZqA','bank_id','1110581KXhbiA','find','12996fKFiGB','api_endpoint'];a0_0x3baf=function(){return _0x35ee54;};return a0_0x3baf();}module[a0_0x33a42f(0x157)]={'syncFromCloud':syncFromCloud};